{
  if (event.getType().equals(GameEvent.EventType.DAMAGED_PLAYER) && game.getOpponents(controllerId).contains(event.getTargetId())) {
    Permanent permanent=game.getPermanent(event.getSourceId());
    Player player=game.getPlayer(event.getSourceId());
    StackObject spell=game.getStack().getStackObject(event.getSourceId());
    if (permanent != null && permanent.getControllerId().equals(controllerId)) {
      return true;
    }
    if (player != null && player.getId().equals(controllerId)) {
      return true;
    }
    if (spell != null && spell.getControllerId().equals(controllerId)) {
      return true;
    }
    return false;
  }
  return false;
}
