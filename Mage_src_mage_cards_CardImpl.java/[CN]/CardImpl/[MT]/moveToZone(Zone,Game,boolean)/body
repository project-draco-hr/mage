{
  Zone fromZone=zone;
  ZoneChangeEvent event=new ZoneChangeEvent(this.getId(),ownerId,fromZone,toZone);
  if (!game.replaceEvent(event)) {
switch (event.getToZone()) {
case GRAVEYARD:
      game.getPlayer(ownerId).putInGraveyard(this,game,!flag);
    break;
case HAND:
  game.getPlayer(ownerId).getHand().add(this);
break;
case EXILED:
game.getExile().getPermanentExile().add(this);
break;
case LIBRARY:
if (flag) game.getPlayer(ownerId).getLibrary().putOnTop(this,game);
 else game.getPlayer(ownerId).getLibrary().putOnBottom(this,game);
}
zone=event.getToZone();
game.fireEvent(new ZoneChangeEvent(this.getId(),ownerId,fromZone,event.getToZone()));
return zone == toZone;
}
return false;
}
