{
  Zone fromZone=zone;
  ZoneChangeEvent event=new ZoneChangeEvent(this.objectId,controllerId,fromZone,toZone);
  if (!game.replaceEvent(event)) {
switch (event.getToZone()) {
case GRAVEYARD:
      game.getPlayer(ownerId).putInGraveyard(this,game,!flag);
    break;
case HAND:
  game.getPlayer(ownerId).getHand().add(this);
break;
case EXILED:
game.getExile().getPermanentExile().add(this);
break;
case LIBRARY:
if (flag) game.getPlayer(ownerId).getLibrary().putOnTop(this,game);
 else game.getPlayer(ownerId).getLibrary().putOnBottom(this,game);
break;
case BATTLEFIELD:
PermanentCard permanent=new PermanentCard(this,ownerId);
game.getBattlefield().addPermanent(permanent);
permanent.entersBattlefield(game);
game.applyEffects();
if (flag) permanent.setTapped(true);
break;
}
zone=event.getToZone();
game.fireEvent(event);
return zone == toZone;
}
return false;
}
