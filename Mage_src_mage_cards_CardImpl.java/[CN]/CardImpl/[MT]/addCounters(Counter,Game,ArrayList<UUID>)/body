{
  GameEvent countersEvent=GameEvent.getEvent(GameEvent.EventType.ADD_COUNTERS,objectId,ownerId,counter.getName(),counter.getCount());
  countersEvent.setAppliedEffects(appliedEffects);
  if (!game.replaceEvent(countersEvent)) {
    int amount=countersEvent.getAmount();
    Counter eventCounter=counter.copy();
    eventCounter.remove(amount - 1);
    for (int i=0; i < amount; i++) {
      GameEvent event=GameEvent.getEvent(GameEvent.EventType.ADD_COUNTER,objectId,ownerId,counter.getName(),1);
      event.setAppliedEffects(appliedEffects);
      if (!game.replaceEvent(event)) {
        counters.addCounter(eventCounter);
        game.fireEvent(GameEvent.getEvent(GameEvent.EventType.COUNTER_ADDED,objectId,ownerId,counter.getName(),1));
      }
    }
  }
}
