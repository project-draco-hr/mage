{
  Player controller=game.getPlayer(source.getControllerId());
  if (controller != null) {
    Card commander=game.getCard(controller.getCommanderId());
    if (commander != null) {
      Mana commanderMana=commander.getManaCost().getMana();
      Choice choice=new ChoiceImpl();
      choice.setMessage("Pick a mana color");
      if (commanderMana.getBlack() > 0) {
        choice.getChoices().add("Black");
      }
      if (commanderMana.getRed() > 0) {
        choice.getChoices().add("Red");
      }
      if (commanderMana.getBlue() > 0) {
        choice.getChoices().add("Blue");
      }
      if (commanderMana.getGreen() > 0) {
        choice.getChoices().add("Green");
      }
      if (commanderMana.getWhite() > 0) {
        choice.getChoices().add("White");
      }
      if (choice.getChoices().size() > 0) {
        if (choice.getChoices().size() == 1) {
          choice.setChoice(choice.getChoices().iterator().next());
        }
 else {
          if (!controller.choose(outcome,choice,game)) {
            return false;
          }
        }
switch (choice.getChoice()) {
case "Black":
          controller.getManaPool().addMana(Mana.BlackMana,game,source);
        break;
case "Blue":
      controller.getManaPool().addMana(Mana.BlueMana,game,source);
    break;
case "Red":
  controller.getManaPool().addMana(Mana.RedMana,game,source);
break;
case "Green":
controller.getManaPool().addMana(Mana.GreenMana,game,source);
break;
case "White":
controller.getManaPool().addMana(Mana.WhiteMana,game,source);
break;
}
}
return true;
}
}
return false;
}
