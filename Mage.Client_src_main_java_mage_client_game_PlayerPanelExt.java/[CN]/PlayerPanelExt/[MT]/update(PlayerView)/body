{
  this.player=player;
  lifeLabel.setText(Integer.toString(player.getLife()));
  poisonLabel.setText(Integer.toString(player.getPoison()));
  handLabel.setText(Integer.toString(player.getHandCount()));
  libraryLabel.setText(Integer.toString(player.getLibraryCount()));
  graveLabel.setText(Integer.toString(player.getGraveyard().size()));
  this.avatar.setText(player.getName());
  if (player.isActive()) {
    this.avatar.setBorder(greenBorder);
  }
 else   if (player.hasLeft()) {
    this.avatar.setBorder(redBorder);
  }
 else {
    this.avatar.setBorder(emptyBorder);
  }
synchronized (this) {
    if (player.getTopCard() != null) {
      if (topCard == null || !topCard.getId().equals(player.getTopCard().getId())) {
        if (topCard == null) {
          topCardPanel.setVisible(true);
        }
        topCard=player.getTopCard();
        topCardPanel.update(topCard);
        topCardPanel.updateImage();
        ActionCallback callback=Plugins.getInstance().getActionCallback();
        ((MageActionCallback)callback).refreshSession();
        topCardPanel.updateCallback(callback,gameId);
      }
    }
 else     if (topCard != null) {
      topCard=null;
      topCardPanel.setVisible(false);
    }
  }
  update(player.getManaPool());
}
