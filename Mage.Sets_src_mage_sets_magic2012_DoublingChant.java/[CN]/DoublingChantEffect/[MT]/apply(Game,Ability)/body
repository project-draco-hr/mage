{
  List<Card> chosenCards=new ArrayList<Card>();
  Player player=game.getPlayer(source.getControllerId());
  List<Permanent> creatures=game.getBattlefield().getAllActivePermanents(FilterCreaturePermanent.getDefault(),source.getControllerId());
  for (  Permanent creature : creatures) {
    StringBuilder sb=new StringBuilder();
    sb.append("Search for ").append(creature.getName()).append(" in your library?");
    if (player.chooseUse(Outcome.PutCreatureInPlay,sb.toString(),game)) {
      FilterCreatureCard filter=new FilterCreatureCard(creature.getName());
      filter.getName().add(creature.getName());
      TargetCardInLibrary target=new TargetCardInLibrary(filter);
      if (player.searchLibrary(target,game)) {
        Card card=player.getLibrary().remove(target.getFirstTarget(),game);
        if (card != null) {
          chosenCards.add(card);
        }
      }
    }
  }
  for (  Card card : chosenCards) {
    card.putOntoBattlefield(game,Zone.LIBRARY,source.getId(),source.getControllerId());
  }
  if (!chosenCards.isEmpty()) {
    player.shuffleLibrary(game);
    return true;
  }
 else {
    return false;
  }
}
