{
  if (effect instanceof ReplacementEffect) {
    ReplacementEffect newEffect=(ReplacementEffect)effect.copy();
    newEffect.setTimestamp();
    replacementEffects.put(newEffect,source);
  }
 else   if (effect instanceof PreventionEffect) {
    PreventionEffect newEffect=(PreventionEffect)effect.copy();
    newEffect.setTimestamp();
    preventionEffects.put(newEffect,source);
  }
 else   if (effect instanceof AsThoughEffect) {
    AsThoughEffect newEffect=(AsThoughEffect)effect.copy();
    newEffect.setTimestamp();
    asThoughEffects.put(newEffect,source);
  }
 else {
    ContinuousEffect newEffect=(ContinuousEffect)effect.copy();
    newEffect.setTimestamp();
    layeredEffects.put(newEffect,source);
  }
}
