{
  UUID winner=null;
  for (  Player player : state.getPlayers().values()) {
    if (player.hasWon()) {
      winner=player.getId();
      break;
    }
    if (!player.hasLost() && !player.hasLeft()) {
      player.won(this);
      winner=player.getId();
      break;
    }
  }
  for (  Player player : state.getPlayers().values()) {
    if (winner != null && !player.getId().equals(winner) && !player.hasLost()) {
      player.lost(this);
    }
  }
  return winner;
}
