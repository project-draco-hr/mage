{
  Player controller=game.getPlayer(source.getControllerId());
  Permanent enchantment=game.getPermanent(source.getSourceId());
  if (controller != null && enchantment != null) {
    Card cardInGraveyard=game.getCard(enchantment.getAttachedTo());
    if (cardInGraveyard == null) {
      return true;
    }
    controller.putOntoBattlefieldWithInfo(cardInGraveyard,game,Zone.GRAVEYARD,source.getSourceId());
    Permanent enchantedCreature=game.getPermanent(cardInGraveyard.getId());
    AnimateDeadEnchantAbility enchantAbility=null;
    for (    Ability ability : enchantment.getAbilities()) {
      if (ability instanceof AnimateDeadEnchantAbility) {
        enchantAbility=(AnimateDeadEnchantAbility)ability;
        break;
      }
    }
    if (enchantAbility == null) {
      return false;
    }
    FilterCreaturePermanent filter=new FilterCreaturePermanent("enchant creature put onto the battlefield with Animate Dead");
    filter.add(new PermanentIdPredicate(cardInGraveyard.getId()));
    Target target=new TargetCreaturePermanent(filter);
    enchantAbility.setTargetName(target.getTargetName());
    if (enchantedCreature != null) {
      target.addTarget(enchantedCreature.getId(),source,game);
      enchantment.getSpellAbility().getTargets().clear();
      enchantment.getSpellAbility().getTargets().add(target);
      enchantedCreature.addAttachment(enchantment.getId(),game);
    }
    return true;
  }
  return false;
}
