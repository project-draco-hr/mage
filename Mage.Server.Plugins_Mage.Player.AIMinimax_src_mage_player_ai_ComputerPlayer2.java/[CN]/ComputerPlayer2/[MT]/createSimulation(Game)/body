{
  Game sim=game.copy();
  for (  Player copyPlayer : sim.getState().getPlayers().values()) {
    Player origPlayer=game.getState().getPlayers().get(copyPlayer.getId());
    SimulatedPlayer newPlayer=new SimulatedPlayer(copyPlayer.getId(),copyPlayer.getId().equals(playerId),maxDepth);
    newPlayer.restore(origPlayer);
    sim.getState().getPlayers().put(copyPlayer.getId(),newPlayer);
  }
  sim.setSimulation(true);
  return sim;
}
