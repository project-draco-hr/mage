{
  List<UUID> perms=new ArrayList<UUID>();
  for (  Player player : game.getPlayers().values()) {
    int numTargets=Math.min(amount,game.getBattlefield().countAll(filter,player.getId()));
    TargetControlledPermanent target=new TargetControlledPermanent(numTargets,numTargets,filter,false);
    if (target.canChoose(player.getId(),game)) {
      while (!target.isChosen()) {
        player.choose(Outcome.Sacrifice,target,source.getSourceId(),game);
      }
      perms.addAll(target.getTargets());
    }
  }
  for (  UUID permID : perms) {
    Permanent permanent=game.getPermanent(permID);
    if (permanent != null)     permanent.sacrifice(source.getSourceId(),game);
  }
  return true;
}
