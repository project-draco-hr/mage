{
  UUID currentPlayerId=node.getGame().getPlayerList().get();
  SimulationNode2 bestChild=null;
  for (  SimulationNode2 child : node.getChildren()) {
    if (alpha >= beta) {
      logger.info("alpha beta pruning");
      break;
    }
    if (SimulationNode2.nodeCount > maxNodes) {
      logger.info("simulating -- reached end-state, count=" + SimulationNode2.nodeCount);
      break;
    }
    int val=addActions(child,filter,depth - 1,alpha,beta);
    if (!currentPlayerId.equals(playerId)) {
      if (val < beta) {
        beta=val;
        bestChild=child;
        if (node.getCombat() == null)         node.setCombat(child.getCombat());
      }
    }
 else {
      if (val > alpha) {
        alpha=val;
        bestChild=child;
        if (node.getCombat() == null)         node.setCombat(child.getCombat());
      }
    }
  }
  node.children.clear();
  if (bestChild != null)   node.children.add(bestChild);
  if (!currentPlayerId.equals(playerId)) {
    return beta;
  }
 else {
    return alpha;
  }
}
