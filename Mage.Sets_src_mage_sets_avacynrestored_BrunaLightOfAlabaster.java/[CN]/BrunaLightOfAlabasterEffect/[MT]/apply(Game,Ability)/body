{
  Player player=game.getPlayer(source.getControllerId());
  if (player == null) {
    return false;
  }
  Permanent permanent=game.getPermanent(source.getSourceId());
  if (permanent == null) {
    return false;
  }
  while (player.chooseUse(Constants.Outcome.Benefit,"Attach an Aura from the battlefield?",game)) {
    Target targetAura=new TargetPermanent(filterAura);
    if (player.choose(Constants.Outcome.Benefit,targetAura,source.getSourceId(),game)) {
      Permanent aura=game.getPermanent(targetAura.getFirstTarget());
      if (aura != null) {
        Permanent attachedTo=game.getPermanent(aura.getAttachedTo());
        if (attachedTo != null) {
          attachedTo.removeAttachment(aura.getId(),game);
        }
        permanent.addAttachment(aura.getId(),game);
      }
    }
  }
  int count=player.getHand().count(filterAuraCard,game);
  while (count > 0 && player.chooseUse(Constants.Outcome.Benefit,"Attach an Aura from your hand?",game)) {
    TargetCard targetAura=new TargetCard(Constants.Zone.PICK,filterAuraCard);
    if (player.choose(Constants.Outcome.Benefit,player.getHand(),targetAura,game)) {
      Card aura=game.getCard(targetAura.getFirstTarget());
      if (aura != null) {
        game.getState().setValue("attachTo:" + aura.getId(),permanent);
        aura.putOntoBattlefield(game,Constants.Zone.HAND,source.getId(),player.getId());
        permanent.addAttachment(aura.getId(),game);
      }
    }
    count=player.getHand().count(filterAuraCard,game);
  }
  count=player.getGraveyard().count(filterAuraCard,game);
  while (count > 0 && player.chooseUse(Constants.Outcome.Benefit,"Attach an Aura from your graveyard?",game)) {
    TargetCard targetAura=new TargetCard(Constants.Zone.PICK,filterAuraCard);
    if (player.choose(Constants.Outcome.Benefit,player.getGraveyard(),targetAura,game)) {
      Card aura=game.getCard(targetAura.getFirstTarget());
      if (aura != null) {
        game.getState().setValue("attachTo:" + aura.getId(),permanent);
        aura.putOntoBattlefield(game,Constants.Zone.GRAVEYARD,source.getId(),player.getId());
        permanent.addAttachment(aura.getId(),game);
      }
    }
    count=player.getGraveyard().count(filterAuraCard,game);
  }
  return true;
}
