{
  Session session=SessionManager.getInstance().getSession(client.getSessionId());
  if (session != null) {
    StringBuilder sessionInfo=new StringBuilder();
    User user=UserManager.getInstance().getUser(session.getUserId());
    if (user != null) {
      sessionInfo.append(user.getName());
    }
 else {
      sessionInfo.append("[user missing] ");
    }
    sessionInfo.append(" at ").append(session.getHost()).append(" sessionId: ").append(session.getId());
    if (throwable instanceof ClientDisconnectedException) {
      SessionManager.getInstance().disconnect(client.getSessionId(),DisconnectReason.Disconnected);
      logger.debug("Client disconnected - " + sessionInfo);
    }
 else {
      SessionManager.getInstance().disconnect(client.getSessionId(),DisconnectReason.LostConnection);
      logger.info("Connection to client lost - " + sessionInfo);
    }
  }
}
