{
  logger.info("Starting MAGE server version " + version);
  logger.info("Logging level: " + Logging.getLevel(logger));
  deleteSavedGames();
  ConfigSettings config=ConfigSettings.getInstance();
  for (  GamePlugin plugin : config.getGameTypes()) {
    GameFactory.getInstance().addGameType(plugin.getName(),loadGameType(plugin),loadPlugin(plugin));
  }
  for (  Plugin plugin : config.getPlayerTypes()) {
    PlayerFactory.getInstance().addPlayerType(plugin.getName(),loadPlugin(plugin));
  }
  for (  Plugin plugin : config.getDeckTypes()) {
    DeckValidatorFactory.getInstance().addDeckType(plugin.getName(),loadPlugin(plugin));
  }
  boolean testMode=false;
  for (  String arg : args) {
    if (arg.startsWith(testModeArg)) {
      testMode=Boolean.valueOf(arg.replace(testModeArg,""));
    }
  }
  Copier.setLoader(classLoader);
  String ip=config.getServerAddress();
  try {
    if (ip.equals("localhost")) {
      ip=InetAddress.getLocalHost().getHostAddress();
    }
  }
 catch (  UnknownHostException ex) {
    logger.log(Level.WARNING,"Could not get server address: ",ex);
  }
  System.setProperty("java.rmi.server.hostname",ip);
  logger.info("MAGE server - using address " + ip);
  server=new ServerImpl(config.getPort(),config.getServerName(),testMode);
}
