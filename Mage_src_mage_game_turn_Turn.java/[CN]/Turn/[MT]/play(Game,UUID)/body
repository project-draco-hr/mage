{
  this.setDeclareAttackersStepStarted(false);
  if (game.isPaused() || game.gameOver(null)) {
    return;
  }
  if (game.getState().getTurnMods().skipTurn(activePlayerId)) {
    return;
  }
  checkTurnIsControlledByOtherPlayer(game,activePlayerId);
  this.activePlayerId=activePlayerId;
  resetCounts();
  game.getPlayer(activePlayerId).beginTurn(game);
  for (  Phase phase : phases) {
    if (game.isPaused() || game.gameOver(null)) {
      return;
    }
    if (!isEndTurnRequested() || phase.getType().equals(TurnPhase.END)) {
      currentPhase=phase;
      game.fireEvent(new GameEvent(GameEvent.EventType.PHASE_CHANGED,activePlayerId,null,activePlayerId));
      if (!game.getState().getTurnMods().skipPhase(activePlayerId,currentPhase.getType())) {
        if (phase.play(game,activePlayerId)) {
          game.emptyManaPools();
          game.saveState(false);
          while (playExtraPhases(game,phase.getType())) {
          }
        }
      }
    }
  }
}
