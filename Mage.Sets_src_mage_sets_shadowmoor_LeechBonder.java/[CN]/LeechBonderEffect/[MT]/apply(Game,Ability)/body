{
  Player controller=game.getPlayer(source.getControllerId());
  Permanent fromPermanent=game.getPermanent(source.getFirstTarget());
  Permanent toPermanent=game.getPermanent(source.getTargets().get(1).getFirstTarget());
  if (fromPermanent == null || toPermanent == null || controller == null) {
    return false;
  }
  Choice choice=new ChoiceImpl();
  Set<String> possibleChoices=new HashSet<>();
  for (  String counterName : fromPermanent.getCounters().keySet()) {
    possibleChoices.add(counterName);
  }
  choice.setChoices(possibleChoices);
  if (controller.choose(outcome,choice,game)) {
    String chosen=choice.getChoice();
    if (fromPermanent.getCounters().containsKey(chosen)) {
      CounterType counterType=CounterType.findByName(chosen);
      if (counterType != null) {
        Counter counter=counterType.createInstance();
        fromPermanent.removeCounters(counter,game);
        toPermanent.addCounters(counter,game);
        return true;
      }
    }
  }
  return false;
}
