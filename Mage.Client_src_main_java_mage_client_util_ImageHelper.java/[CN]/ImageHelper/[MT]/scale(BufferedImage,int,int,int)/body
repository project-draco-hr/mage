{
  BufferedImage dbi=null;
  if (sbi != null) {
    double fWidth=dWidth / sbi.getWidth();
    double fHeight=dHeight / sbi.getHeight();
    dbi=new BufferedImage(dWidth,dHeight,imageType);
    Graphics2D g=dbi.createGraphics();
    AffineTransform at=AffineTransform.getScaleInstance(fWidth,fHeight);
    g.drawRenderedImage(sbi,at);
    g.dispose();
  }
  return dbi;
}
