{
  if (card == null || isCurrentCard(card)) {
    return;
  }
  currentCard=card;
  ThreadUtils.threadPool.submit(new Runnable(){
    @Override public void run(){
      try {
        if (!card.equals(currentCard)) {
          return;
        }
        SwingUtilities.invokeLater(new Runnable(){
          @Override public void run(){
            if (!card.equals(currentCard)) {
              return;
            }
            StringBuilder buffer=GuiDisplayUtil.getRulefromCardView(card);
            int ruleLength=0;
            int rules=0;
            for (            String rule : card.getRules()) {
              ruleLength+=rule.length();
              rules++;
            }
            resizeTooltipIfNeeded(container,ruleLength,rules);
            setText(buffer.toString());
            setCaretPosition(0);
          }
        }
);
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
);
}
