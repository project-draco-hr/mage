{
  allActions=new ConcurrentLinkedQueue<>();
  Game sim=game.copy();
  sim.setSimulation(true);
  forced=false;
  simulateOptions(sim);
  ArrayList<Ability> list=new ArrayList<>(allActions);
  Collections.reverse(list);
  if (!forced) {
    list.add(pass);
  }
  if (logger.isTraceEnabled()) {
    for (    Ability a : allActions) {
      logger.trace("ability==" + a);
      if (a.getTargets().size() > 0) {
        Player player=game.getPlayer(a.getFirstTarget());
        if (player != null) {
          logger.trace("   target=" + player.getName());
        }
      }
    }
  }
  return list;
}
