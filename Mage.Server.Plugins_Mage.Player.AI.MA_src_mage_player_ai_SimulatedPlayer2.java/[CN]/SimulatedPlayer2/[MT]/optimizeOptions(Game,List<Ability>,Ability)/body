{
  if (options.isEmpty()) {
    return options;
  }
  Iterator<Ability> iterator=options.iterator();
  boolean bad=true;
  boolean good=true;
  for (  Effect effect : ability.getEffects()) {
    if (effect.getOutcome().isGood()) {
      bad=false;
    }
 else {
      good=false;
    }
  }
  if (bad) {
    while (iterator.hasNext()) {
      Ability ability1=iterator.next();
      if (ability1.getTargets().size() == 1) {
        Permanent permanent=game.getPermanent(ability1.getFirstTarget());
        if (permanent != null && !game.getOpponents(playerId).contains(permanent.getControllerId())) {
          iterator.remove();
          continue;
        }
        if (ability1.getFirstTarget().equals(playerId)) {
          iterator.remove();
        }
      }
    }
  }
  if (good) {
    while (iterator.hasNext()) {
      Ability ability1=iterator.next();
      if (ability1.getTargets().size() == 1) {
        Permanent permanent=game.getPermanent(ability1.getFirstTarget());
        if (permanent != null && game.getOpponents(playerId).contains(permanent.getControllerId())) {
          iterator.remove();
          continue;
        }
        if (game.getOpponents(playerId).contains(ability1.getFirstTarget())) {
          iterator.remove();
        }
      }
    }
  }
  return options;
}
