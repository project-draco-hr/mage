{
  ratings.clear();
  File file=new File("results");
  File ratingFile=new File("ratings.txt");
  if (ratingFile.exists()) {
    if (!ratingFile.delete()) {
      throw new RuntimeException("Couldn't delete previous ratings.txt file");
    }
  }
  if (ratingFile.createNewFile()) {
    for (    File f : file.listFiles()) {
      if (!f.getName().equals("rating.txt")) {
        parseFile(f);
      }
    }
    ratings=MapSorter.sortByValue(ratings);
    FileOutputStream fos=new FileOutputStream(ratingFile);
    BufferedOutputStream b=new BufferedOutputStream(fos);
    for (    Entry<String,Integer> entry : ratings.entrySet()) {
      String line=entry.getValue() + " : " + entry.getKey()+ newLine;
      b.write(line.getBytes());
    }
    b.close();
    fos.close();
  }
}
