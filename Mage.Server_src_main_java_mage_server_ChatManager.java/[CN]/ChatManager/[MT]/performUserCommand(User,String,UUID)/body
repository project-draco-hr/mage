{
  String command=message.substring(1).trim().toUpperCase(Locale.ENGLISH);
  if (command.startsWith("I ") || command.startsWith("INFO ")) {
    message=UserManager.getInstance().getUserHistory(message.substring(command.startsWith("I ") ? 3 : 6));
    chatSessions.get(chatId).broadcastInfoToUser(user,message);
    return true;
  }
  if (command.startsWith("W ") || command.startsWith("WHISPER ")) {
    String rest=message.substring(command.startsWith("W ") ? 3 : 9);
    int first=rest.indexOf(" ");
    if (first > 1) {
      String userToName=rest.substring(0,first);
      rest=rest.substring(first + 1).trim();
      User userTo=UserManager.getInstance().getUserByName(userToName);
      if (userTo != null) {
        if (!chatSessions.get(chatId).broadcastWhisperToUser(user,userTo,rest)) {
          message+=new StringBuilder("<br/>User ").append(userToName).append(" not found").toString();
          chatSessions.get(chatId).broadcastInfoToUser(user,message);
        }
      }
 else {
        message+=new StringBuilder("<br/>User ").append(userToName).append(" not found").toString();
        chatSessions.get(chatId).broadcastInfoToUser(user,message);
      }
      return true;
    }
  }
  if (command.equals("L") || command.equals("LIST")) {
    message+=new StringBuilder("<br/>List of commands:").append("<br/>\\info [username] - shows the history of a player").append("<br/>\\list - Show a list of commands").append("<br/>\\whisper [player name] [text] - whisper to the player with the given name").toString();
    chatSessions.get(chatId).broadcastInfoToUser(user,message);
    return true;
  }
  return false;
}
