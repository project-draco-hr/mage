{
  final JPopupMenu Pmenu;
  JMenuItem menuItem;
  Pmenu=new JPopupMenu();
  menuItem=new JMenuItem("Concede game");
  Pmenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (JOptionPane.showConfirmDialog(PlayAreaPanel.this,"Are you sure you want to concede the game?","Confirm concede game",JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {
        MageFrame.getSession().concedeGame(gameId);
      }
    }
  }
);
  menuItem=new JMenuItem("Quit match");
  Pmenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (JOptionPane.showConfirmDialog(PlayAreaPanel.this,"Are you sure you want to quit the match?","Confirm quit match",JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {
        MageFrame.getSession().quitMatch(gameId);
      }
    }
  }
);
  menuItem=new JMenuItem("Cancel");
  Pmenu.add(menuItem);
  battlefieldPanel.getMainPanel().addMouseListener(new MouseAdapter(){
    @Override public void mouseReleased(    MouseEvent Me){
      if (Me.isPopupTrigger() && playingMode) {
        Pmenu.show(Me.getComponent(),Me.getX(),Me.getY());
      }
    }
  }
);
}
