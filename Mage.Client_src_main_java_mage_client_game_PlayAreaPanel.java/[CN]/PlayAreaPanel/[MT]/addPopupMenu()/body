{
  final JPopupMenu Pmenu;
  JMenuItem menuItem;
  Pmenu=new JPopupMenu();
  menuItem=new JMenuItem("F2 - Confirm");
  Pmenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (gamePanel.getFeedbackPanel() != null) {
        gamePanel.getFeedbackPanel().pressOKYesOrDone();
      }
    }
  }
);
  menuItem=new JMenuItem("F3 - Cancel previous F4/F9 skip action");
  Pmenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      gamePanel.getSession().restorePriority(gameId);
    }
  }
);
  Pmenu.addSeparator();
  menuItem=new JMenuItem("F4 - Skip phases until next turn (stop on stack/attack/block)");
  Pmenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      gamePanel.getSession().passTurnPriority(gameId);
      ;
    }
  }
);
  menuItem=new JMenuItem("F9 - Skip everything until own next turn (stop on attack/block)");
  Pmenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      gamePanel.getSession().passPriorityUntilNextYourTurn(gameId);
    }
  }
);
  Pmenu.addSeparator();
  menuItem=new JMenuItem("Concede game");
  Pmenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (JOptionPane.showConfirmDialog(PlayAreaPanel.this,"Are you sure you want to concede the game?","Confirm concede game",JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {
        MageFrame.getSession().concedeGame(gameId);
      }
    }
  }
);
  Pmenu.addSeparator();
  menuItem=new JMenuItem("Concede complete match");
  Pmenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      if (JOptionPane.showConfirmDialog(PlayAreaPanel.this,"Are you sure you want to concede the complete match?","Confirm concede match",JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {
        MageFrame.getSession().quitMatch(gameId);
      }
    }
  }
);
  battlefieldPanel.getMainPanel().addMouseListener(new MouseAdapter(){
    @Override public void mouseReleased(    MouseEvent Me){
      if (Me.isPopupTrigger() && playingMode) {
        Pmenu.show(Me.getComponent(),Me.getX(),Me.getY());
      }
    }
  }
);
}
