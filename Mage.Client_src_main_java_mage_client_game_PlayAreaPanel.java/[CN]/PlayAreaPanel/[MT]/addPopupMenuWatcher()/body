{
  JMenuItem menuItem;
  menuItem=new JMenuItem("Stop watching");
  popupMenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      UserRequestMessage message=new UserRequestMessage("Confirm stop watching game","Are you sure you want to stop watching the game?");
      message.setButton1("No",null);
      message.setButton2("Yes",PlayerAction.CLIENT_STOP_WATCHING);
      message.setGameId(gameId);
      MageFrame.getInstance().showUserRequestDialog(message);
    }
  }
);
  menuItem=new JMenuItem("Request permission to see hand cards");
  popupMenu.add(menuItem);
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      gamePanel.getSession().sendPlayerAction(PlayerAction.REQUEST_PERMISSION_TO_SEE_HAND_CARDS,gameId,playerId);
    }
  }
);
  battlefieldPanel.getMainPanel().addMouseListener(new MouseAdapter(){
    @Override public void mouseReleased(    MouseEvent Me){
      this.checkMenu(Me);
    }
    @Override public void mousePressed(    MouseEvent Me){
      this.checkMenu(Me);
    }
    private void checkMenu(    MouseEvent Me){
      if (Me.isPopupTrigger() && playingMode) {
        popupMenu.show(Me.getComponent(),Me.getX(),Me.getY());
      }
    }
  }
);
}
