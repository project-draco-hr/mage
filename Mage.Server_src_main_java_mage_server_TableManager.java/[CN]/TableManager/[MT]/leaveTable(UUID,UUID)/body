{
  TableController tableController=controllers.get(tableId);
  if (tableController != null) {
    Table table=getTable(tableId);
    if (table != null && isTableOwner(tableId,userId) && (table.getState().equals(TableState.WAITING) || table.getState().equals(TableState.STARTING))) {
      removeTable(tableId);
    }
 else {
      logger.debug("TABLE leave - userId: " + userId + "  tableId: "+ tableId);
      tableController.leaveTable(userId);
    }
  }
}
