{
  if (controllers.containsKey(tableId)) {
    Table table=getTable(tableId);
    if (table != null && isTableOwner(tableId,userId) && (table.getState().equals(TableState.WAITING) || table.getState().equals(TableState.STARTING))) {
      removeTable(tableId);
    }
 else {
      controllers.get(tableId).leaveTable(userId);
    }
  }
}
