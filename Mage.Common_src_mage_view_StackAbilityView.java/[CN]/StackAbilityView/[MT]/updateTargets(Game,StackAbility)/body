{
  List<String> names=new ArrayList<>();
  for (  UUID modeId : ability.getModes().getSelectedModes()) {
    ability.getModes().setActiveMode(modeId);
    if (ability.getTargets().size() > 0) {
      setTargets(ability.getTargets());
    }
 else {
      List<UUID> targetList=new ArrayList<>();
      for (      Effect effect : ability.getEffects()) {
        TargetPointer targetPointer=effect.getTargetPointer();
        if (targetPointer instanceof FixedTarget) {
          targetList.add(((FixedTarget)targetPointer).getTarget());
        }
      }
      if (targetList.size() > 0) {
        overrideTargets(targetList);
        for (        UUID uuid : targetList) {
          MageObject mageObject=game.getObject(uuid);
          if (mageObject != null) {
            if ((mageObject instanceof Card) && ((Card)mageObject).isFaceDown(game)) {
              continue;
            }
            names.add(mageObject.getName());
          }
        }
      }
    }
  }
  if (!names.isEmpty()) {
    getRules().add("<i>Related objects: " + names.toString() + "</i>");
  }
  if (ability.isModal()) {
    Modes modes=ability.getModes();
    for (    UUID modeId : modes.getSelectedModes()) {
      modes.setActiveMode(modeId);
      this.rules.add("<span color='green'><i>Chosen mode: " + ability.getEffects().getText(modes.get(modeId)) + "</i></span>");
    }
  }
}
