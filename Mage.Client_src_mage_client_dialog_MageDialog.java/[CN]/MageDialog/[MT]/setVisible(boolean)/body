{
  super.setVisible(value);
  this.toFront();
  this.setClosable(!modal);
  if (modal) {
    if (value) {
      startModal();
    }
 else {
      if (SwingUtilities.isEventDispatchThread()) {
        stopModal();
      }
 else {
        try {
          SwingUtilities.invokeAndWait(new Runnable(){
            @Override public void run(){
              stopModal();
            }
          }
);
        }
 catch (        InterruptedException ex) {
          logger.log(Level.SEVERE,null,ex);
        }
catch (        InvocationTargetException ex) {
          logger.log(Level.SEVERE,null,ex);
        }
      }
    }
  }
}
