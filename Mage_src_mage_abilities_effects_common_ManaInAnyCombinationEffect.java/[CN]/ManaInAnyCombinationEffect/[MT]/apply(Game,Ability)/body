{
  Player player=game.getPlayer(source.getControllerId());
  if (player != null) {
    Mana mana=new Mana();
    int amountOfManaLeft=amount.calculate(game,source,this);
    while (amountOfManaLeft > 0 && player.isInGame()) {
      for (      ColoredManaSymbol coloredManaSymbol : manaSymbols) {
        int number=player.getAmount(0,amountOfManaLeft,new StringBuilder("How many ").append(coloredManaSymbol.name()).append(" mana?").toString(),game);
        if (number > 0) {
          for (int i=0; i < number; i++) {
            mana.add(new Mana(coloredManaSymbol));
          }
          amountOfManaLeft-=number;
        }
        if (amountOfManaLeft == 0) {
          break;
        }
      }
    }
    player.getManaPool().addMana(mana,game,source);
    return true;
  }
  return false;
}
