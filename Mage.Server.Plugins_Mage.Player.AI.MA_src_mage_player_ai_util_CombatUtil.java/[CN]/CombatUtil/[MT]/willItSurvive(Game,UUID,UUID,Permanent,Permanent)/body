{
  Game sim=game.copy();
  Combat combat=sim.getCombat();
  combat.setAttacker(attackingPlayerId);
  combat.setDefenders(sim);
  if (blocker == null || attacker == null || sim.getPlayer(defendingPlayerId) == null) {
    return null;
  }
  sim.getPlayer(defendingPlayerId).declareBlocker(blocker.getId(),attacker.getId(),sim);
  sim.fireEvent(GameEvent.getEvent(GameEvent.EventType.DECLARED_BLOCKERS,defendingPlayerId,defendingPlayerId));
  sim.checkStateAndTriggered();
  while (!sim.getStack().isEmpty()) {
    sim.getStack().resolve(sim);
    sim.applyEffects();
  }
  sim.fireEvent(GameEvent.getEvent(GameEvent.EventType.DECLARE_BLOCKERS_STEP_POST,sim.getActivePlayerId(),sim.getActivePlayerId()));
  simulateStep(sim,new FirstCombatDamageStep());
  simulateStep(sim,new CombatDamageStep());
  simulateStep(sim,new EndOfCombatStep());
  while (!sim.getStack().isEmpty()) {
    sim.getStack().resolve(sim);
    sim.applyEffects();
  }
  return new SurviveInfo(!sim.getBattlefield().containsPermanent(attacker.getId()),!sim.getBattlefield().containsPermanent(blocker.getId()));
}
