{
  String choice=(String)game.getState().getValue(source.getSourceId().toString() + "_ElsewhereFlask");
  if (choice != null) {
    for (    Permanent land : game.getBattlefield().getActivePermanents(filter,source.getControllerId(),game)) {
      if (land != null) {
switch (layer) {
case TypeChangingEffects_4:
          if (sublayer == Constants.SubLayer.NA) {
            land.getSubtype().clear();
            land.getSubtype().add(choice);
          }
        break;
case AbilityAddingRemovingEffects_6:
      if (sublayer == Constants.SubLayer.NA) {
        land.getAbilities().clear();
        if (choice.equals("Forest")) {
          land.addAbility(new GreenManaAbility(),id,game);
        }
        if (choice.equals("Plains")) {
          land.addAbility(new WhiteManaAbility(),id,game);
        }
        if (choice.equals("Mountain")) {
          land.addAbility(new RedManaAbility(),id,game);
        }
        if (choice.equals("Island")) {
          land.addAbility(new BlueManaAbility(),id,game);
        }
        if (choice.equals("Swamp")) {
          land.addAbility(new BlackManaAbility(),id,game);
        }
      }
    break;
}
}
}
return true;
}
return false;
}
