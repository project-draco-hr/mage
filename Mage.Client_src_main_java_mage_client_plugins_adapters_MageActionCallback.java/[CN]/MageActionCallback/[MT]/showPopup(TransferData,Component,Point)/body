{
  if (data.card.getRarity().equals(Constants.Rarity.NA)) {
    return;
  }
  if (cardInfoPane == null) {
    PopupFactory factory=PopupFactory.getSharedInstance();
    popup=factory.getPopup(data.component,data.popupText,(int)data.locationOnScreen.getX() + data.popupOffsetX,(int)data.locationOnScreen.getY() + data.popupOffsetY + 40);
    popup.show();
    popup.hide();
    popup=factory.getPopup(data.component,data.popupText,(int)data.locationOnScreen.getX() + data.popupOffsetX,(int)data.locationOnScreen.getY() + data.popupOffsetY + 40);
    popup.show();
  }
 else {
    ThreadUtils.threadPool2.submit(new Runnable(){
      @Override public void run(){
        ThreadUtils.sleep(700);
        if (!popupCard.equals(data.card)) {
          return;
        }
        try {
          if (session == null) {
            return;
          }
          final Component popupContainer=session.getUI().getComponent(MageComponents.POPUP_CONTAINER);
          Component popup2=session.getUI().getComponent(MageComponents.CARD_INFO_PANE);
          ((CardInfoPane)popup2).setCard(data.card);
          Point location=new Point((int)data.locationOnScreen.getX() + data.popupOffsetX - 40,(int)data.locationOnScreen.getY() + data.popupOffsetY - 40);
          location=GuiDisplayUtil.keepComponentInsideParent(location,parentPoint,popup2,parentComponent);
          location.translate(-parentPoint.x,-parentPoint.y);
          popupContainer.setLocation(location);
          ThreadUtils.sleep(200);
          final Component c=session.getUI().getComponent(MageComponents.DESKTOP_PANE);
          SwingUtilities.invokeLater(new Runnable(){
            @Override public void run(){
              popupContainer.setVisible(true);
              c.repaint();
            }
          }
);
        }
 catch (        Exception e) {
          e.printStackTrace();
        }
      }
    }
);
  }
}
