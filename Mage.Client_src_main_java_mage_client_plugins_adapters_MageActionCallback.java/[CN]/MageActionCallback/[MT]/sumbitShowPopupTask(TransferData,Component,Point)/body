{
  ThreadUtils.threadPool2.submit(new Runnable(){
    @Override public void run(){
      ThreadUtils.sleep(300);
      if (popupCard == null || !popupCard.equals(data.card)) {
        return;
      }
      try {
        if (session == null || !state || enlarged) {
          return;
        }
        final Component popupContainer=MageFrame.getUI().getComponent(MageComponents.POPUP_CONTAINER);
        Component popup2=MageFrame.getUI().getComponent(MageComponents.CARD_INFO_PANE);
        ((CardInfoPane)popup2).setCard(data.card,popupContainer);
        Point location=new Point((int)data.locationOnScreen.getX() + data.popupOffsetX - 40,(int)data.locationOnScreen.getY() + data.popupOffsetY - 40);
        location=GuiDisplayUtil.keepComponentInsideParent(location,parentPoint,popup2,parentComponent);
        location.translate(-parentPoint.x,-parentPoint.y);
        popupContainer.setLocation(location);
        ThreadUtils.sleep(200);
        final Component c=MageFrame.getUI().getComponent(MageComponents.DESKTOP_PANE);
        SwingUtilities.invokeLater(new Runnable(){
          @Override public void run(){
            if (!state || enlarged) {
              return;
            }
            popupContainer.setVisible(true);
            c.repaint();
          }
        }
);
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
);
}
