{
  if (scanned) {
    return;
  }
  scanned=true;
  List<CardInfo> cardsToAdd=new ArrayList<CardInfo>();
  List<String> packages=new ArrayList<String>();
  for (  ExpansionSet set : Sets.getInstance().values()) {
    packages.add(set.getPackageName());
    ExpansionRepository.instance.add(new ExpansionInfo(set));
  }
  for (  Class c : ClassScanner.findClasses(packages,CardImpl.class)) {
    if (!CardRepository.instance.cardExists(c.getCanonicalName())) {
      Card card=CardImpl.createCard(c);
      if (card != null) {
        cardsToAdd.add(new CardInfo(card));
        if (card instanceof SplitCard) {
          SplitCard splitCard=(SplitCard)card;
          cardsToAdd.add(new CardInfo(splitCard.getLeftHalfCard()));
          cardsToAdd.add(new CardInfo(splitCard.getRightHalfCard()));
        }
      }
    }
  }
  if (!cardsToAdd.isEmpty()) {
    CardRepository.instance.addCards(cardsToAdd);
  }
}
