{
  Player controller=game.getPlayer(source.getControllerId());
  if (controller != null) {
    if (this.affectedObjectsSet) {
      Set<UUID> toDelete=new HashSet<>();
      for (      UUID creatureId : objects) {
        Permanent creature=game.getPermanent(creatureId);
        if (creature != null) {
          int power=creature.getPower().getValue();
          creature.getPower().setValue(creature.getToughness().getValue());
          creature.getToughness().setValue(power);
        }
 else {
          toDelete.add(creatureId);
        }
      }
      this.objects.removeAll(toDelete);
    }
 else {
      for (      Permanent creature : game.getState().getBattlefield().getActivePermanents(filter,source.getControllerId(),source.getSourceId(),game)) {
        int power=creature.getPower().getValue();
        creature.getPower().setValue(creature.getToughness().getValue());
        creature.getToughness().setValue(power);
      }
    }
    return true;
  }
  return false;
}
