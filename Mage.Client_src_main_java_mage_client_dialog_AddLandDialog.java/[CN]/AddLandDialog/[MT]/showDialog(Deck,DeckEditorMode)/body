{
  this.deck=deck;
  SortedSet<String> landSetNames=new TreeSet<>();
  if (!mode.equals(DeckEditorMode.FREE_BUILDING)) {
    for (    String setCode : deck.getExpansionSetCodes()) {
      ExpansionInfo expansionInfo=ExpansionRepository.instance.getSetByCode(setCode);
      if (expansionInfo != null && expansionInfo.hasBasicLands()) {
        this.landSetCodes.add(expansionInfo.getCode());
        landSetNames.add(expansionInfo.getName());
      }
    }
    if (this.landSetCodes.isEmpty()) {
      for (      String setCode : deck.getExpansionSetCodes()) {
        ExpansionInfo expansionInfo=ExpansionRepository.instance.getSetByCode(setCode);
        if (expansionInfo != null) {
          List<ExpansionInfo> blockSets=ExpansionRepository.instance.getSetsFromBlock(expansionInfo.getBlockName());
          for (          ExpansionInfo blockSet : blockSets) {
            if (blockSet.hasBasicLands()) {
              this.landSetCodes.add(blockSet.getCode());
              landSetNames.add(blockSet.getName());
            }
          }
        }
      }
    }
  }
  if (this.landSetCodes.isEmpty()) {
    List<ExpansionInfo> basicLandSets=ExpansionRepository.instance.getSetsWithBasicLandsByReleaseDate();
    for (    ExpansionInfo expansionInfo : basicLandSets) {
      landSetNames.add(expansionInfo.getName());
    }
  }
  if (landSetNames.isEmpty()) {
    throw new IllegalArgumentException("No set with basic land was found");
  }
  if (landSetNames.size() > 1) {
    landSetNames.add("<Random lands>");
  }
  cbLandSet.setModel(new DefaultComboBoxModel(landSetNames.toArray()));
  MageFrame.getDesktop().add(this,JLayeredPane.PALETTE_LAYER);
  this.setVisible(true);
}
