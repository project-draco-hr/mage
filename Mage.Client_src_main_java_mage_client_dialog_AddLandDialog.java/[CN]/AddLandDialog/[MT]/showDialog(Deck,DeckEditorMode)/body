{
  this.deck=deck;
  SortedSet<String> landSets=new TreeSet<>();
  if (!mode.equals(DeckEditorMode.FREE_BUILDING)) {
    for (    String setCode : deck.getExpansionSetCodes()) {
      ExpansionInfo expansionInfo=ExpansionRepository.instance.getSetByCode(setCode);
      if (expansionInfo != null && expansionInfo.hasBasicLands()) {
        this.setCodesland.add(expansionInfo.getCode());
        landSets.add(expansionInfo.getName());
      }
    }
    if (this.setCodesland.isEmpty()) {
      for (      String setCode : deck.getExpansionSetCodes()) {
        ExpansionInfo expansionInfo=ExpansionRepository.instance.getSetByCode(setCode);
        if (expansionInfo != null) {
          List<ExpansionInfo> blockSets=ExpansionRepository.instance.getSetsFromBlock(expansionInfo.getBlockName());
          for (          ExpansionInfo blockSet : blockSets) {
            if (blockSet.hasBasicLands()) {
              this.setCodesland.add(blockSet.getCode());
              landSets.add(blockSet.getName());
            }
          }
        }
      }
    }
  }
  if (this.setCodesland.isEmpty()) {
    List<ExpansionInfo> basicLandSets=ExpansionRepository.instance.getSetsWithBasicLandsByReleaseDate();
    for (    ExpansionInfo expansionInfo : basicLandSets) {
      landSets.add(expansionInfo.getName());
    }
  }
  if (landSets.isEmpty()) {
    throw new IllegalArgumentException("No set with basic land was found");
  }
  if (landSets.size() > 1) {
    landSets.add("<Random lands>");
  }
  cbLandSet.setModel(new DefaultComboBoxModel(landSets.toArray()));
  MageFrame.getDesktop().add(this,JLayeredPane.PALETTE_LAYER);
  this.setVisible(true);
}
