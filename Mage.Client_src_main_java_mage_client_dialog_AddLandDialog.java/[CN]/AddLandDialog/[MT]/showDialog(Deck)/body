{
  this.deck=deck;
  for (  String setCode : deck.getExpansionSetCodes()) {
    ExpansionInfo expansionInfo=ExpansionRepository.instance.getSetByCode(setCode);
    if (expansionInfo != null && expansionInfo.hasBasicLands()) {
      this.setCodesland.add(expansionInfo.getCode());
    }
  }
  if (this.setCodesland.isEmpty()) {
    for (    String setCode : deck.getExpansionSetCodes()) {
      ExpansionInfo expansionInfo=ExpansionRepository.instance.getSetByCode(setCode);
      ExpansionInfo[] blockSets=ExpansionRepository.instance.getSetsFromBlock(expansionInfo.getBlockName());
      for (      ExpansionInfo blockSet : blockSets) {
        if (blockSet.hasBasicLands()) {
          this.setCodesland.add(blockSet.getCode());
        }
      }
    }
  }
  if (this.setCodesland.isEmpty()) {
    Random generator=new Random();
    List<ExpansionInfo> basicLandSets=ExpansionRepository.instance.getSetsWithBasicLandsByReleaseDate();
    if (basicLandSets.size() > 0) {
      this.setCodesland.add(basicLandSets.get(generator.nextInt(basicLandSets.size())).getCode());
    }
  }
  if (this.setCodesland.isEmpty()) {
    throw new IllegalArgumentException("No set with basic land was found");
  }
  MageFrame.getDesktop().add(this,JLayeredPane.PALETTE_LAYER);
  this.setVisible(true);
}
