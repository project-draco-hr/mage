{
  lock.readLock().lock();
  try {
    if (sessionState == SessionState.CONNECTED) {
      server.sendChatMessage(chatId,userName,message);
      return true;
    }
  }
 catch (  RemoteException ex) {
    handleRemoteException(ex);
  }
catch (  MageException ex) {
    handleMageException(ex);
  }
 finally {
    lock.readLock().unlock();
  }
  return false;
}
