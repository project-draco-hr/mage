{
  if (isPermanent && (card instanceof PermanentView)) {
    boolean needsTapping=isTapped() != ((PermanentView)card).isTapped();
    boolean needsFlipping=isFlipped() != ((PermanentView)card).isFlipped();
    if (needsTapping || needsFlipping) {
      Animation.tapCardToggle(this,this,needsTapping,needsFlipping);
    }
    if (needsTapping && ((PermanentView)card).isTapped()) {
      AudioManager.playTapPermanent();
    }
    boolean needsTranforming=isTransformed() != card.isTransformed();
    if (needsTranforming) {
      Animation.transformCard(this,this,card.isTransformed());
    }
  }
  if (card.canTransform()) {
    dayNightButton.setVisible(!isPermanent);
  }
  if (CardUtil.isCreature(card) && CardUtil.isPlaneswalker(card)) {
    ptText.setText(card.getPower() + "/" + card.getToughness()+ " ("+ card.getLoyalty()+ ")");
  }
 else   if (CardUtil.isCreature(card)) {
    ptText.setText(card.getPower() + "/" + card.getToughness());
  }
 else   if (CardUtil.isPlaneswalker(card)) {
    ptText.setText(card.getLoyalty());
  }
 else {
    ptText.setText("");
  }
  setText(card);
  this.isPlayable=card.isPlayable();
  boolean updateImage=!gameCard.getName().equals(card.getName()) || gameCard.isFaceDown() != card.isFaceDown();
  this.gameCard=card;
  String cardType=getType(card);
  popupText.setText(getText(cardType,card));
  if (hasSickness && CardUtil.isCreature(gameCard) && isPermanent) {
    overlayPanel.setVisible(true);
  }
 else {
    overlayPanel.setVisible(false);
  }
  if (updateImage) {
    updateImage();
    if (card.canTransform()) {
      BufferedImage transformIcon;
      if (card.isTransformed()) {
        transformIcon=ImageManagerImpl.getInstance().getNightImage();
      }
 else {
        transformIcon=ImageManagerImpl.getInstance().getDayImage();
      }
      dayNightButton.setIcon(new ImageIcon(transformIcon));
    }
  }
  repaint();
}
