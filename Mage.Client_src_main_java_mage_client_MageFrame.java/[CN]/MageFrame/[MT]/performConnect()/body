{
  String server=MagePreferences.getServerAddress();
  int port=MagePreferences.getServerPort();
  String userName=MagePreferences.getUserName(server);
  String password=MagePreferences.getPassword(server);
  String proxyServer=prefs.get("proxyAddress","");
  int proxyPort=Integer.parseInt(prefs.get("proxyPort","0"));
  ProxyType proxyType=ProxyType.valueByText(prefs.get("proxyType","None"));
  String proxyUsername=prefs.get("proxyUsername","");
  String proxyPassword=prefs.get("proxyPassword","");
  try {
    setCursor(new Cursor(Cursor.WAIT_CURSOR));
    Connection connection=new Connection();
    connection.setUsername(userName);
    connection.setPassword(password);
    connection.setHost(server);
    connection.setPort(port);
    connection.setProxyType(proxyType);
    connection.setProxyHost(proxyServer);
    connection.setProxyPort(proxyPort);
    connection.setProxyUsername(proxyUsername);
    connection.setProxyPassword(proxyPassword);
    setUserPrefsToConnection(connection);
    logger.debug("connecting (auto): " + proxyType + " "+ proxyServer+ " "+ proxyPort+ " "+ proxyUsername);
    if (MageFrame.connect(connection)) {
      showGames(false);
      return true;
    }
 else {
      showMessage("Unable to connect to server");
    }
  }
  finally {
    setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
  }
  return false;
}
