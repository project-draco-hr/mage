{
  if (SwingUtilities.isEventDispatchThread()) {
    setStatusText("Not connected");
    disableButtons();
    hideGames();
    hideTables();
  }
 else {
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        disableButtons();
        if (JOptionPane.showConfirmDialog(MageFrame.this,"The connection to server was lost. Reconnect?","Warning",JOptionPane.YES_NO_OPTION) == JOptionPane.YES_OPTION) {
          session.disconnect(false);
          tablesPane.clearChat();
          if (performConnect()) {
            enableButtons();
          }
        }
 else {
          setStatusText("Not connected");
          hideGames();
          hideTables();
        }
      }
    }
);
  }
}
