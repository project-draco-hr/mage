{
  boolean autoConnect=Boolean.parseBoolean(prefs.get("autoConnect","false"));
  if (autoConnect) {
    String userName=prefs.get("userName","");
    String server=prefs.get("serverAddress","");
    int port=Integer.parseInt(prefs.get("serverPort",""));
    String proxyServer=prefs.get("proxyAddress","");
    int proxyPort=Integer.parseInt(prefs.get("proxyPort",""));
    ProxyType proxyType=Connection.ProxyType.valueByText(prefs.get("proxyType","None"));
    String proxyUsername=prefs.get("proxyUsername","");
    String proxyPassword=prefs.get("proxyPassword","");
    try {
      setCursor(new Cursor(Cursor.WAIT_CURSOR));
      Connection connection=new Connection();
      connection.setUsername(userName);
      connection.setHost(server);
      connection.setPort(port);
      connection.setProxyType(proxyType);
      connection.setProxyHost(proxyServer);
      connection.setProxyPort(proxyPort);
      connection.setProxyUsername(proxyUsername);
      connection.setProxyPassword(proxyPassword);
      logger.debug("connecting (auto): " + proxyType + " "+ proxyServer+ " "+ proxyPort+ " "+ proxyUsername);
      if (MageFrame.connect(connection)) {
        return true;
      }
 else {
        showMessage("Unable to connect to server");
      }
    }
  finally {
      setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
    }
  }
  return false;
}
