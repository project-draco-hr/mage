{
  List<Permanent> permanents=game.getBattlefield().getActivePermanents(new FilterCreaturePermanent(),source.getControllerId(),game);
  for (  Permanent permanent : permanents) {
    permanent.destroy(source.getSourceId(),game,false);
  }
  Player opponent=game.getPlayer(source.getFirstTarget());
  Player player=game.getPlayer(source.getControllerId());
  if (player != null && opponent != null) {
    TargetCardInLibrary target=new TargetCardInLibrary(0,3,new FilterCreatureCard("creature cards from his library to put in his graveyard"));
    if (player.searchLibrary(target,game,opponent.getId())) {
      player.moveCards(new CardsImpl(target.getTargets()),Zone.LIBRARY,Zone.GRAVEYARD,source,game);
    }
    opponent.shuffleLibrary(game);
    return true;
  }
  return false;
}
