{
  Permanent equipment=game.getPermanent(sourceAbility.getSourceId());
  int xValue=0;
  if (equipment != null && equipment.getAttachedTo() != null) {
    Permanent equipped=game.getPermanent(equipment.getAttachedTo());
    if (equipped != null) {
      for (      Permanent permanent : game.getBattlefield().getAllActivePermanents(new FilterCreaturePermanent(),sourceAbility.getControllerId(),game)) {
        if (!permanent.getId().equals(equipped.getId())) {
          if (CardUtil.shareSubtypes(equipped,permanent,game)) {
            xValue++;
          }
        }
      }
    }
  }
  return xValue;
}
