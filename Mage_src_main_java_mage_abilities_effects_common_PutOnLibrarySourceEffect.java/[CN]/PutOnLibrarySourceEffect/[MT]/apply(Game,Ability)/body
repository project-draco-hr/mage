{
  boolean result=false;
switch (game.getState().getZone(source.getSourceId())) {
case BATTLEFIELD:
    Permanent permanent=game.getPermanent(source.getSourceId());
  if (permanent != null) {
    result|=permanent.moveToZone(Zone.LIBRARY,source.getSourceId(),game,onTop);
  }
case GRAVEYARD:
Card card=game.getCard(source.getSourceId());
if (card != null) {
for (Player player : game.getPlayers().values()) {
  if (player.getGraveyard().contains(card.getId())) {
    player.getGraveyard().remove(card);
    result|=card.moveToZone(Zone.LIBRARY,source.getSourceId(),game,onTop);
  }
}
}
}
return result;
}
