{
  String key=getKey(source,game);
  @SuppressWarnings("unchecked") Set<UUID> onceSelectedModes=(Set<UUID>)game.getState().getValue(key);
  if (onceSelectedModes == null) {
    onceSelectedModes=new HashSet<>();
  }
  for (  Mode mode : selectedModes) {
    onceSelectedModes.add(mode.getId());
  }
  game.getState().setValue(key,onceSelectedModes);
}
