{
  if (isEnabled()) {
    if (isHovered) {
      g.drawImage(hoverImage,0,0,imageSize.width,imageSize.height,this);
      if (text != null) {
        Graphics2D g2d=(Graphics2D)g;
        if (textColor != null)         g2d.setColor(textColor);
        if (useMiniFont)         g2d.setFont(textFontMini);
 else         g2d.setFont(textFont);
        if (textOffsetX == -1) {
          FontRenderContext frc=g2d.getFontRenderContext();
          int textWidth=(int)textFont.getStringBounds(text,frc).getWidth();
          if (textWidth > buttonSize.width) {
            g2d.setFont(textFontMini);
            useMiniFont=true;
            frc=g2d.getFontRenderContext();
            textWidth=(int)textFontMini.getStringBounds(text,frc).getWidth();
          }
          textOffsetX=(int)((imageSize.width - textWidth) / 2);
        }
        g2d.drawString(text,textOffsetX,textOffsetY);
      }
    }
 else {
      g.drawImage(image,0,0,imageSize.width,imageSize.height,this);
    }
    if (isSelected) {
      if (selectedImage != null) {
        g.drawImage(selectedImage,0,0,imageSize.width,imageSize.height,this);
      }
 else {
        System.err.println("No selectedImage for button.");
      }
    }
  }
 else {
    g.drawImage(disabledImage,0,0,imageSize.width,imageSize.height,this);
  }
  if (overlayImage != null) {
    g.drawImage(overlayImage,(imageSize.width - overlayImageSize.width) / 2,10,this);
  }
}
