{
  Permanent permanent=game.getPermanent(id);
  MageObject targetSource=game.getObject(source.getSourceId());
  if (permanent != null) {
    if (source != null)     return permanent.canBeTargetedBy(game.getObject(source.getSourceId()),controllerId,game) && filter.match(permanent,source.getSourceId(),controllerId,game);
 else     return filter.match(permanent,source.getSourceId(),controllerId,game);
  }
  Player player=game.getPlayer(id);
  if (player != null)   if (source != null)   return player.canBeTargetedBy(targetSource,game) && filter.match(player,game);
 else   return filter.match(player,game);
  return false;
}
