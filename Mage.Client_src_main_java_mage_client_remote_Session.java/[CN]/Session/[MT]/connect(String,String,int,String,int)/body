{
  if (isConnected()) {
    disconnect();
  }
  try {
    System.setSecurityManager(null);
    if (proxyServer.length() > 0) {
      System.setProperty("socksProxyHost",proxyServer);
      System.setProperty("socksProxyPort",Integer.toString(proxyPort));
    }
 else {
      System.clearProperty("socksProxyHost");
      System.clearProperty("socksProxyPort");
    }
    Registry reg=LocateRegistry.getRegistry(serverName,port);
    this.server=(Server)reg.lookup(Config.remoteServer);
    this.userName=userName;
    if (client == null)     client=new Client(this,frame);
    sessionId=server.registerClient(userName,client.getId(),frame.getVersion());
    callbackDaemon=new CallbackClientDaemon(sessionId,client,server);
    serverState=server.getServerState();
    sessionExecutor.scheduleWithFixedDelay(new ServerPinger(),15,5,TimeUnit.SECONDS);
    logger.info("Connected to RMI server at " + serverName + ":"+ port);
    frame.setStatusText("Connected to " + serverName + ":"+ port+ " ");
    frame.enableButtons();
    return true;
  }
 catch (  MageException ex) {
    logger.log(Level.SEVERE,null,ex);
    disconnect();
    JOptionPane.showMessageDialog(frame,"Unable to connect to server. " + ex.getMessage());
  }
catch (  RemoteException ex) {
    logger.log(Level.SEVERE,"Unable to connect to server - ",ex);
    disconnect();
    JOptionPane.showMessageDialog(frame,"Unable to connect to server. " + ex.getMessage());
  }
catch (  NotBoundException ex) {
    logger.log(Level.SEVERE,"Unable to connect to server - ",ex);
  }
  return false;
}
