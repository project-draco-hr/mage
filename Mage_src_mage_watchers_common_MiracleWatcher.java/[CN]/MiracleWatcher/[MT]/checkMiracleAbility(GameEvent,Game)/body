{
  Card card=game.getCard(event.getTargetId());
  if (card != null) {
    for (    Ability ability : card.getAbilities()) {
      if (ability instanceof MiracleAbility) {
        Player controller=game.getPlayer(ability.getControllerId());
        game.getContinuousEffects().costModification(ability,game);
        ManaCosts<ManaCost> manaCostsToPay=ability.getManaCostsToPay();
        if (controller != null) {
          game.getStack().add(new StackAbility(ability,controller.getId()));
          Cards cards=new CardsImpl(Constants.Zone.PICK);
          cards.add(card);
          controller.lookAtCards("Miracle",cards,game);
          if (controller.chooseUse(Constants.Outcome.Benefit,"Use Miracle " + manaCostsToPay.getText() + "?",game)) {
            game.getStack().poll();
            controller.revealCards("Miracle",cards,game);
            ManaCosts costRef=card.getSpellAbility().getManaCostsToPay();
            costRef.clear();
            for (            ManaCost manaCost : manaCostsToPay) {
              costRef.add(manaCost);
            }
            controller.cast(card.getSpellAbility(),game,false);
            break;
          }
 else {
            game.getStack().poll();
          }
        }
      }
    }
  }
}
