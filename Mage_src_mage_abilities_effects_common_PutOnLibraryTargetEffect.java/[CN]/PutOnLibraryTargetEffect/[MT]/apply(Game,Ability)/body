{
  boolean result=false;
  Player controller=game.getPlayer(source.getControllerId());
  if (controller != null) {
    for (    UUID targetId : targetPointer.getTargets(game,source)) {
switch (game.getState().getZone(targetId)) {
case BATTLEFIELD:
        Permanent permanent=game.getPermanent(targetId);
      if (permanent != null) {
        result|=controller.moveCardToLibraryWithInfo(permanent,source.getSourceId(),game,Zone.BATTLEFIELD,onTop,true);
      }
    break;
case GRAVEYARD:
  Card card=game.getCard(targetId);
if (card != null && game.getState().getZone(targetId).equals(Zone.GRAVEYARD)) {
  result|=controller.moveCardToLibraryWithInfo(card,source.getSourceId(),game,Zone.GRAVEYARD,onTop,true);
}
break;
}
}
}
return result;
}
