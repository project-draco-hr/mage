{
  for (  TournamentPlayer player : players.values()) {
    player.setResults("");
    player.setPoints(0);
    player.setStateInfo("");
  }
  for (  Round round : rounds) {
    for (    TournamentPairing pair : round.getPairs()) {
      Match match=pair.getMatch();
      if (match != null && match.isMatchOver()) {
        TournamentPlayer tp1=pair.getPlayer1();
        TournamentPlayer tp2=pair.getPlayer2();
        MatchPlayer mp1=match.getPlayer(pair.getPlayer1().getPlayer().getId());
        MatchPlayer mp2=match.getPlayer(pair.getPlayer2().getPlayer().getId());
        if (round.getRoundNumber() == rounds.size()) {
          if (tp1.getState().equals(TournamentPlayerState.DUELING)) {
            tp1.setState(TournamentPlayerState.WAITING);
          }
          if (tp2.getState().equals(TournamentPlayerState.DUELING)) {
            tp2.setState(TournamentPlayerState.WAITING);
          }
        }
        tp1.setResults(addRoundResult(pair,tp1,tp2));
        tp2.setResults(addRoundResult(pair,tp2,tp1));
        if (mp2.hasQuit() || mp1.getWins() > mp2.getWins()) {
          tp1.setPoints(tp1.getPoints() + 3);
        }
 else         if (mp1.hasQuit() || mp1.getWins() < mp2.getWins()) {
          tp2.setPoints(tp2.getPoints() + 3);
        }
 else {
          tp1.setPoints(tp1.getPoints() + 1);
          tp2.setPoints(tp2.getPoints() + 1);
        }
      }
    }
    for (    TournamentPlayer tp : round.getPlayerByes()) {
      tp.setResults(new StringBuilder(tp.getResults()).append("(Round Bye) ").toString());
      tp.setPoints(tp.getPoints() + 3);
    }
  }
}
