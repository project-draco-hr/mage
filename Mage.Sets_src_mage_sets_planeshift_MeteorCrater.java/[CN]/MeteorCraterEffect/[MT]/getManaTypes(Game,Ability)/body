{
  List<Permanent> controlledPermanents=game.getBattlefield().getActivePermanents(filter,source.getControllerId(),game);
  Mana types=new Mana();
  for (  Permanent permanent : controlledPermanents) {
    ObjectColor color=permanent.getColor(game);
    if (color.isBlack()) {
      types.add(Mana.BlackMana);
    }
    if (color.isBlue()) {
      types.add(Mana.BlueMana);
    }
    if (color.isGreen()) {
      types.add(Mana.GreenMana);
    }
    if (color.isRed()) {
      types.add(Mana.RedMana);
    }
    if (color.isWhite()) {
      types.add(Mana.WhiteMana);
    }
  }
  return types;
}
