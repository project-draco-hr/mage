{
  if (userId != null) {
    if (users.containsKey(userId)) {
      User user=users.get(userId);
      user.setSessionId("");
      ChatManager.getInstance().broadcast(userId,"has lost connection",MessageColor.BLACK);
      logger.info(new StringBuilder("User ").append(user.getName()).append(" has lost connection  userId:").append(userId));
    }
    ChatManager.getInstance().removeUser(userId,reason);
  }
}
