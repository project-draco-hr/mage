{
  Calendar calendar=Calendar.getInstance();
  calendar.add(Calendar.MINUTE,-3);
  List<User> usersToCheck=new ArrayList<>();
  usersToCheck.addAll(users.values());
  for (  User user : usersToCheck) {
    if (!user.getUserState().equals(UserState.Expired) && user.isExpired(calendar.getTime())) {
      logger.info(user.getName() + ": session expired userId: " + user.getId()+ " Host: "+ user.getHost());
      removeUser(user.getId(),DisconnectReason.SessionExpired);
    }
  }
}
