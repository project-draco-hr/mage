{
  Calendar calendar=Calendar.getInstance();
  calendar.add(Calendar.MINUTE,-3);
  List<User> usersToCheck=new ArrayList<>();
  usersToCheck.addAll(users.values());
  for (  User user : usersToCheck) {
    if (user.isExpired(calendar.getTime())) {
      logger.info(new StringBuilder(user.getName()).append(": session expired userId: ").append(user.getId()).append(" Host: ").append(user.getHost()));
      removeUser(user.getId(),DisconnectReason.SessionExpired);
    }
  }
}
