{
  Zone fromZone=game.getState().getZone(objectId);
  Player controller=game.getPlayer(controllerId);
  if (controller != null && controller.removeFromBattlefield(this,game)) {
    Card originalCard=game.getCard(this.getId());
    if (isFaceDown()) {
      setFaceDown(false);
      if (originalCard != null) {
        originalCard.setFaceDown(false);
      }
    }
    ZoneChangeEvent event=new ZoneChangeEvent(this,sourceId,controllerId,fromZone,toZone,appliedEffects);
    if (!game.replaceEvent(event)) {
      Player owner=game.getPlayer(ownerId);
      game.rememberLKI(objectId,Zone.BATTLEFIELD,this);
      if (owner != null) {
        this.setControllerId(ownerId);
        if (originalCard != null) {
          originalCard.updateZoneChangeCounter();
        }
switch (event.getToZone()) {
case GRAVEYARD:
          owner.putInGraveyard(card,game,!flag);
        break;
case HAND:
      owner.getHand().add(card);
    break;
case EXILED:
  game.getExile().getPermanentExile().add(card);
break;
case COMMAND:
game.addCommander(new Commander(card));
break;
case LIBRARY:
if (flag) {
owner.getLibrary().putOnTop(card,game);
}
 else {
owner.getLibrary().putOnBottom(card,game);
}
break;
case BATTLEFIELD:
break;
}
game.setZone(objectId,event.getToZone());
game.addSimultaneousEvent(event);
return game.getState().getZone(objectId) == toZone;
}
}
}
return false;
}
