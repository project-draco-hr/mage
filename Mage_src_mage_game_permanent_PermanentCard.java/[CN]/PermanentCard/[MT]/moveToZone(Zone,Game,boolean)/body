{
  Zone fromZone=zone;
  ZoneChangeEvent event=new ZoneChangeEvent(this,controllerId,fromZone,toZone);
  if (!game.replaceEvent(event)) {
    Player controller=game.getPlayer(controllerId);
    if (controller != null && controller.removeFromBattlefield(this,game)) {
      Card card=game.getCard(objectId);
      Player owner=game.getPlayer(ownerId);
      if (owner != null) {
switch (event.getToZone()) {
case GRAVEYARD:
          owner.putInGraveyard(card,game,!flag);
        break;
case HAND:
      owner.getHand().add(card);
    break;
case EXILED:
  game.getExile().getPermanentExile().add(card);
break;
case LIBRARY:
if (flag) owner.getLibrary().putOnTop(card,game);
 else owner.getLibrary().putOnBottom(card,game);
break;
case BATTLEFIELD:
break;
}
zone=event.getToZone();
game.fireEvent(event);
return zone == toZone;
}
}
}
return false;
}
