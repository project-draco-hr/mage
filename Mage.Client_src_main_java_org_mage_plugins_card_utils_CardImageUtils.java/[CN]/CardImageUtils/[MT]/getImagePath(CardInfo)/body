{
  String filePath;
  String suffix=".jpg";
  TFile file;
  if (card.isToken()) {
    if (pathCache.containsKey(card)) {
      return pathCache.get(card);
    }
    filePath=getTokenImagePath(card);
    file=new TFile(filePath);
    if (!file.exists()) {
      filePath=searchForCardImage(card);
      file=new TFile(filePath);
    }
    if (file.exists()) {
      pathCache.put(card,filePath);
    }
  }
 else {
    filePath=getImagePath(card,false);
    file=new TFile(filePath);
    if (!file.exists()) {
      filePath=getImagePath(card,true);
      file=new TFile(filePath);
    }
  }
  if (file == null || !file.exists()) {
    filePath=cleanString(card.getName()) + suffix;
    file=new TFile(filePath);
  }
  if (file.exists()) {
    return filePath;
  }
 else {
    return null;
  }
}
