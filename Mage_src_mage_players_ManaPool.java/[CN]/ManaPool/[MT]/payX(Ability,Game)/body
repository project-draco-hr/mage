{
  int total=0;
  Iterator<ManaPoolItem> it=manaItems.iterator();
  while (it.hasNext()) {
    ManaPoolItem item=it.next();
    if (item.isConditional()) {
      if (item.getConditionalMana().apply(ability,game)) {
        total+=item.count();
        it.remove();
      }
    }
 else {
      total+=item.count();
      it.remove();
    }
  }
  return total;
}
