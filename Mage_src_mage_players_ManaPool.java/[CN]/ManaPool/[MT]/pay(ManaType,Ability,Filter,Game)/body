{
  if (getConditional(manaType,ability,filter,game) > 0) {
    removeConditional(manaType,ability,game);
    return true;
  }
  for (  ManaPoolItem mana : manaItems) {
    if (filter == null || filter.match(game.getObject(mana.getSourceId()),game)) {
      boolean spendAnyMana=spendAnyMana(ability,game);
      if (mana.get(manaType) > 0 || (spendAnyMana && mana.count() > 0)) {
        game.fireEvent(new GameEvent(GameEvent.EventType.MANA_PAYED,ability.getId(),mana.getSourceId(),ability.getControllerId(),0,mana.getFlag()));
        if (spendAnyMana) {
          mana.removeAny();
        }
 else {
          mana.remove(manaType);
        }
        return true;
      }
    }
  }
  return false;
}
