{
  if (!values.containsKey(permanent.getId())) {
    int value=0;
    if (permanent.getCardType().contains(CardType.CREATURE)) {
      if (permanent.canAttack(game))       value+=2;
      value+=permanent.getPower().getValue();
      value+=permanent.getToughness().getValue();
      value+=permanent.getAbilities().getEvasionAbilities().size();
      value+=permanent.getAbilities().getProtectionAbilities().size();
      value+=permanent.getAbilities().containsKey(FirstStrikeAbility.getInstance().getId()) ? 1 : 0;
      value+=permanent.getAbilities().containsKey(DoubleStrikeAbility.getInstance().getId()) ? 2 : 0;
      value+=permanent.getAbilities().containsKey(TrampleAbility.getInstance().getId()) ? 1 : 0;
    }
    value+=permanent.getAbilities().getManaAbilities(Zone.BATTLEFIELD).size();
    value+=permanent.getAbilities().getActivatedAbilities(Zone.BATTLEFIELD).size();
    values.put(permanent.getId(),value);
  }
  return values.get(permanent.getId());
}
