{
  if (isConnected()) {
    sessionState=SessionState.DISCONNECTING;
  }
  if (connection == null) {
    return;
  }
  try {
    callbackClient.disconnect();
    TransporterClient.destroyTransporterClient(server);
  }
 catch (  Throwable ex) {
    logger.fatal("Error disconnecting ...",ex);
  }
  if (sessionState == SessionState.DISCONNECTING || sessionState == SessionState.CONNECTING) {
    sessionState=SessionState.DISCONNECTED;
    logger.info("Disconnected ... ");
  }
  client.disconnected();
  if (showMessage) {
    client.showError("Network error.  You have been disconnected");
  }
}
