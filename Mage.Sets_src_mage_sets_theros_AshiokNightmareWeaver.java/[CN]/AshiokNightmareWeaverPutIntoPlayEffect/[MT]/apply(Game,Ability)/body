{
  Player controller=game.getPlayer(source.getControllerId());
  MageObject sourceObject=source.getSourceObject(game);
  if (sourceObject == null || controller == null) {
    return false;
  }
  int cmc=0;
  for (  Cost cost : source.getCosts()) {
    if (cost instanceof PayVariableLoyaltyCost) {
      cmc=((PayVariableLoyaltyCost)cost).getAmount();
    }
  }
  FilterCard filter=new FilterCreatureCard("creature card with converted mana cost {" + cmc + "} exiled with "+ sourceObject.getIdName());
  filter.add(new ConvertedManaCostPredicate(Filter.ComparisonType.Equal,cmc));
  Target target=new TargetCardInExile(filter,CardUtil.getExileZoneId(game,source.getSourceId(),source.getSourceObjectZoneChangeCounter()));
  if (target.canChoose(source.getSourceId(),controller.getId(),game)) {
    if (controller.chooseTarget(Outcome.PutCreatureInPlay,target,source,game)) {
      Card card=game.getCard(target.getFirstTarget());
      if (card != null && controller.putOntoBattlefieldWithInfo(card,game,Zone.EXILED,source.getSourceId())) {
        Permanent permanent=game.getPermanent(card.getId());
        if (permanent != null) {
          permanent.changeControllerId(source.getControllerId(),game);
        }
        ContinuousEffectImpl effect=new AshiokNightmareWeaverAddTypeEffect();
        effect.setTargetPointer(new FixedTarget(card.getId()));
        game.addEffect(effect,source);
        return true;
      }
    }
  }
  return false;
}
