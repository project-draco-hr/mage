{
  Player controller=game.getPlayer(source.getControllerId());
  if (controller != null) {
    Card commander=game.getCard(controller.getCommanderId());
    if (commander != null) {
      Mana commanderMana=commander.getManaCost().getMana();
      Choice choice=new ChoiceImpl(true);
      choice.setMessage("Pick a mana color");
      if (commanderMana.getBlack() > 0) {
        choice.getChoices().add("Black");
      }
      if (commanderMana.getRed() > 0) {
        choice.getChoices().add("Red");
      }
      if (commanderMana.getBlue() > 0) {
        choice.getChoices().add("Blue");
      }
      if (commanderMana.getGreen() > 0) {
        choice.getChoices().add("Green");
      }
      if (commanderMana.getWhite() > 0) {
        choice.getChoices().add("White");
      }
      if (choice.getChoices().size() > 0) {
        if (choice.getChoices().size() == 1) {
          choice.setChoice(choice.getChoices().iterator().next());
        }
 else {
          controller.choose(outcome,choice,game);
        }
        if (choice.getChoice().equals("Black")) {
          controller.getManaPool().addMana(Mana.BlackMana,game,source);
        }
 else         if (choice.getChoice().equals("Blue")) {
          controller.getManaPool().addMana(Mana.BlueMana,game,source);
        }
 else         if (choice.getChoice().equals("Red")) {
          controller.getManaPool().addMana(Mana.RedMana,game,source);
        }
 else         if (choice.getChoice().equals("Green")) {
          controller.getManaPool().addMana(Mana.GreenMana,game,source);
        }
 else         if (choice.getChoice().equals("White")) {
          controller.getManaPool().addMana(Mana.WhiteMana,game,source);
        }
      }
      return true;
    }
  }
  return false;
}
