{
  for (  Player player : game.getPlayers().values()) {
    players.add(new PlayerView(player,game));
  }
  for (  StackObject stackObject : game.getStack()) {
    if (stackObject instanceof StackAbility) {
      MageObject object=game.getObject(stackObject.getSourceId());
      if (object != null)       stack.add(new StackAbilityView((StackAbility)stackObject,object.getName()));
 else       stack.add(new StackAbilityView((StackAbility)stackObject,""));
    }
 else {
      stack.add(new CardView((Spell)stackObject));
    }
  }
  for (  ExileZone exileZone : game.getExile().getExileZones()) {
    exiles.add(new ExileView(exileZone));
  }
  this.phase=game.getTurn().getPhase();
  this.step=game.getTurn().getStep();
  this.turn=game.getTurnNum();
  if (game.getActivePlayerId() != null)   this.activePlayerName=game.getPlayer(game.getActivePlayerId()).getName();
 else   this.activePlayerName="";
  if (game.getPriorityPlayerId() != null)   this.priorityPlayerName=game.getPlayer(game.getPriorityPlayerId()).getName();
 else   this.priorityPlayerName="";
  for (  CombatGroup combatGroup : game.getCombat().getGroups()) {
    combat.add(new CombatGroupView(combatGroup,game));
  }
  this.special=game.getSpecialActions().getControlledBy(game.getPriorityPlayerId()).size() > 0;
}
