{
  Player targetPlayer=game.getPlayer(this.getTargetPointer().getFirst(game,source));
  boolean colorShared;
  if (targetPlayer != null) {
    int possibleIterations=targetPlayer.getLibrary().size() / 2;
    int iteration=0;
    do {
      iteration++;
      if (iteration > possibleIterations + 20) {
        game.setDraw(source.getControllerId());
        return true;
      }
      colorShared=false;
      Card card1=targetPlayer.getLibrary().removeFromTop(game);
      if (card1 != null) {
        targetPlayer.moveCardToGraveyardWithInfo(card1,source.getSourceId(),game,Zone.LIBRARY);
        Card card2=targetPlayer.getLibrary().removeFromTop(game);
        if (card2 != null) {
          targetPlayer.moveCardToGraveyardWithInfo(card2,source.getSourceId(),game,Zone.LIBRARY);
          if (card1.getColor().hasColor() && card2.getColor().hasColor()) {
            colorShared=card1.getColor().shares(card2.getColor());
          }
        }
      }
    }
 while (colorShared && targetPlayer.isInGame());
    return true;
  }
  return false;
}
