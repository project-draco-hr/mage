{
  if (!choices.isEmpty()) {
    if (target instanceof TargetPermanent) {
      for (      Permanent permanent : game.getBattlefield().getAllActivePermanents((FilterPermanent)target.getFilter())) {
        for (        String choose2 : choices) {
          if (permanent.getName().equals(choose2)) {
            if (((TargetPermanent)target).canTarget(playerId,permanent.getId(),null,game) && !target.getTargets().contains(permanent.getId())) {
              target.add(permanent.getId(),game);
              choices.remove(choose2);
              return true;
            }
          }
 else           if ((permanent.getName() + "-" + permanent.getExpansionSetCode()).equals(choose2)) {
            if (((TargetPermanent)target).canTarget(playerId,permanent.getId(),null,game) && !target.getTargets().contains(permanent.getId())) {
              target.add(permanent.getId(),game);
              choices.remove(choose2);
              return true;
            }
          }
        }
      }
    }
  }
  return super.choose(outcome,target,sourceId,game,options);
}
