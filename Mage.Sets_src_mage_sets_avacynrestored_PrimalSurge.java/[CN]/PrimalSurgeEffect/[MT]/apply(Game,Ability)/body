{
  Player player=game.getPlayer(source.getControllerId());
  if (player == null) {
    return false;
  }
  boolean repeat;
  do {
    repeat=false;
    if (player.getLibrary().size() > 0) {
      Card card=player.getLibrary().removeFromTop(game);
      if (card != null) {
        card.moveToExile(null,"",source.getId(),game);
        List<CardType> cardType=card.getCardType();
        if ((cardType.contains(CardType.ARTIFACT) || cardType.contains(CardType.CREATURE) || cardType.contains(CardType.ENCHANTMENT)|| cardType.contains(CardType.LAND)|| cardType.contains(CardType.PLANESWALKER)) && player.chooseUse(Outcome.PutCardInPlay,"Put " + card.getName() + " onto the battlefield?",game)) {
          card.moveToZone(Zone.BATTLEFIELD,source.getId(),game,false);
          Permanent permanent=game.getPermanent(card.getId());
          if (permanent == null) {
            permanent=(Permanent)game.getLastKnownInformation(card.getId(),Zone.BATTLEFIELD);
          }
          if (permanent != null) {
            repeat=true;
          }
        }
      }
    }
  }
 while (repeat);
  return true;
}
