{
  if (isEmpty())   this.add(new Mana());
  if (!abilities.isEmpty()) {
    if (abilities.size() == 1) {
      ManaAbility ability=abilities.get(0);
      if (ability.getManaCosts().isEmpty()) {
        addMana(ability.getNetMana(game));
      }
 else {
        addMana(ability.getManaCosts().getMana(),ability.getNetMana(game));
      }
    }
 else     if (abilities.size() > 1) {
      List<Mana> copy=copy();
      this.clear();
      for (      ManaAbility ability : abilities) {
        if (ability.getManaCosts().isEmpty()) {
          for (          Mana mana : copy) {
            Mana newMana=new Mana();
            newMana.add(mana);
            newMana.add(ability.getNetMana(game));
            this.add(newMana);
          }
        }
 else {
          for (          Mana mana : copy) {
            Mana newMana=new Mana();
            newMana.add(mana);
            if (mana.contains(ability.getManaCosts().getMana())) {
              newMana.subtract(ability.getManaCosts().getMana());
              newMana.add(ability.getNetMana(game));
            }
            this.add(newMana);
          }
        }
      }
    }
  }
}
