{
  Player player=game.getPlayer(source.getControllerId());
  if (player == null) {
    return false;
  }
  Cards cards=new CardsImpl(Zone.PICK);
  for (int i=0; i < 5; i++) {
    Card card=player.getLibrary().removeFromTop(game);
    if (card != null) {
      cards.add(card);
      game.setZone(card.getId(),Zone.PICK);
    }
  }
  player.revealCards("Fact or Fiction",cards,game);
  Set<UUID> opponents=game.getOpponents(source.getControllerId());
  if (!opponents.isEmpty()) {
    Player opponent=game.getPlayer(opponents.iterator().next());
    TargetCard target=new TargetCard(0,cards.size(),Zone.PICK,new FilterCard("cards to put in the first pile"));
    Cards pile1=new CardsImpl();
    if (opponent.choose(Outcome.Neutral,cards,target,game)) {
      List<UUID> targets=target.getTargets();
      for (      UUID targetId : targets) {
        Card card=cards.get(targetId,game);
        if (card != null) {
          pile1.add(card);
          cards.remove(card);
        }
      }
    }
    player.revealCards("Pile 1 (Fact or Fiction)",pile1,game);
    player.revealCards("Pile 2 (Fact or Fiction)",cards,game);
    Choice choice=new ChoiceImpl(true);
    choice.setMessage("Select a pile of cards to put into your hand:");
    StringBuilder sb=new StringBuilder("Pile 1: ");
    for (    UUID cardId : pile1) {
      Card card=pile1.get(cardId,game);
      if (card != null) {
        sb.append(card.getName()).append("; ");
      }
    }
    sb.delete(sb.length() - 2,sb.length());
    choice.getChoices().add(sb.toString());
    sb=new StringBuilder("Pile 2: ");
    for (    UUID cardId : cards) {
      Card card=cards.get(cardId,game);
      if (card != null) {
        sb.append(card.getName()).append("; ");
      }
    }
    sb.delete(sb.length() - 2,sb.length());
    choice.getChoices().add(sb.toString());
    Zone pile1Zone=Zone.GRAVEYARD;
    Zone pile2Zone=Zone.HAND;
    if (player.choose(Outcome.Neutral,choice,game)) {
      if (choice.getChoice().startsWith("Pile 1")) {
        pile1Zone=Zone.HAND;
        pile2Zone=Zone.GRAVEYARD;
      }
    }
    for (    UUID cardUuid : pile1) {
      Card card=pile1.get(cardUuid,game);
      if (card != null) {
        card.moveToZone(pile1Zone,source.getId(),game,false);
      }
    }
    for (    UUID cardUuid : cards) {
      Card card=cards.get(cardUuid,game);
      if (card != null) {
        card.moveToZone(pile2Zone,source.getId(),game,false);
      }
    }
  }
  return true;
}
