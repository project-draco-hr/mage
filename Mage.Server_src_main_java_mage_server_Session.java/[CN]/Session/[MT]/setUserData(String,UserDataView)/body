{
  User user=UserManager.getInstance().findUser(userName);
  if (user != null) {
    UserData userData=user.getUserData();
    if (userData == null) {
      userData=new UserData(UserGroup.PLAYER,userDataView.getAvatarId(),userDataView.isShowAbilityPickerForced(),userDataView.allowRequestShowHandCards(),userDataView.confirmEmptyManaPool(),userDataView.getUserSkipPrioritySteps(),userDataView.getFlagName());
      user.setUserData(userData);
    }
 else {
      if (userDataView.getAvatarId() == 51) {
        updateAvatar(userName,userData);
      }
      userData.setAvatarId(userDataView.getAvatarId());
      userData.setShowAbilityPickerForced(userDataView.isShowAbilityPickerForced());
      userData.setAllowRequestShowHandCards(userDataView.allowRequestShowHandCards());
      userData.setUserSkipPrioritySteps(userDataView.getUserSkipPrioritySteps());
      userData.setConfirmEmptyManaPool(userDataView.confirmEmptyManaPool());
    }
    return true;
  }
  return false;
}
