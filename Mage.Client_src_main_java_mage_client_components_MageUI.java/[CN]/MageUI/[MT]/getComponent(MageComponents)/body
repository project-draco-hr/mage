{
  Object componentSync;
synchronized (ui) {
    if (ui.containsKey(name)) {
      return ui.get(name);
    }
 else {
      componentSync=new Object();
      sync.put(name,componentSync);
    }
  }
synchronized (componentSync) {
    componentSync.wait();
    if (!ui.containsKey(name)) {
      throw new IllegalStateException("Component wasn't initialized. This should not happen.");
    }
    return ui.get(name);
  }
}
