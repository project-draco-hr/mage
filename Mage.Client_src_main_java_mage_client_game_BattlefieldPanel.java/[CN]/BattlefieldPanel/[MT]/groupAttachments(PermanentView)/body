{
  MagePermanent perm=permanents.get(permanent.getId());
  if (perm == null)   return;
  int position=getPosition(perm);
  perm.getLinks().clear();
  Rectangle r=perm.getBounds();
  if (!Plugins.getInstance().isCardPluginLoaded()) {
    for (    UUID attachmentId : permanent.getAttachments()) {
      MagePermanent link=permanents.get(attachmentId);
      perm.getLinks().add(link);
      r.translate(20,20);
      link.setBounds(r);
      setPosition(link,++position);
    }
  }
 else {
    for (    UUID attachmentId : permanent.getAttachments()) {
      MagePermanent link=permanents.get(attachmentId);
      link.setBounds(r);
      perm.getLinks().add(link);
      r.translate(8,10);
      perm.setBounds(r);
      moveToFront(link);
      moveToFront(perm);
    }
  }
}
