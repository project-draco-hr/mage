{
  int height=Plugins.getInstance().sortPermanents(ui,permanents.values());
  BattlefieldPanel.this.jPanel.setPreferredSize(new Dimension(width - 30,height));
  this.jScrollPane.repaint();
  this.jScrollPane.revalidate();
  if (battlefield == null) {
    return;
  }
  for (  PermanentView permanent : battlefield.values()) {
    if (permanent.getAttachments() != null) {
      groupAttachments(permanent);
    }
  }
  invalidate();
  repaint();
}
