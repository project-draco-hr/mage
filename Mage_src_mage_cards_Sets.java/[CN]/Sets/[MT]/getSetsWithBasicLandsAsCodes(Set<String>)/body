{
  Set<String> landSets=new LinkedHashSet<String>();
  if (setCodes != null && !setCodes.isEmpty()) {
    for (    String setCode : setCodes) {
      ExpansionSet expansionSet=Sets.findSet(setCode);
      if (expansionSet.hasBasicLands()) {
        landSets.add(setCode);
      }
 else       if (expansionSet.getParentSet() != null && !landSets.contains(expansionSet.getParentSet().getCode())) {
        landSets.add(expansionSet.getParentSet().getCode());
      }
    }
  }
  if (landSets.isEmpty()) {
    Random generator=new Random();
    int maxRndValue=0;
    String selectedSetCode=null;
    for (    ExpansionSet set : Sets.getInstance().getSortedByReleaseDate()) {
      if (set.hasBasicLands) {
        int rndValue=generator.nextInt(100);
        if (rndValue >= maxRndValue) {
          maxRndValue=rndValue;
          selectedSetCode=set.getCode();
        }
      }
    }
    if (selectedSetCode != null) {
      landSets.add(selectedSetCode);
    }
 else {
      throw new IllegalArgumentException("No set with basic land was found");
    }
  }
  return landSets;
}
