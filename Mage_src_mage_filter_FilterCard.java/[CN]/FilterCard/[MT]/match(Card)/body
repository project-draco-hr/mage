{
  if (!super.match(card))   return notFilter;
  if (ownerId.size() > 0 && ownerId.contains(card.getOwnerId()) == notOwner)   return notFilter;
  if (expansionSetCode.size() > 0 && expansionSetCode.contains(card.getExpansionSetCode()) == notExpansionSetCode)   return notFilter;
  if (text.length() > 0) {
    boolean filterOut=!card.getName().toLowerCase().contains(text.toLowerCase());
    if (filterOut) {
      String[] tokens=text.toLowerCase().split(" ");
      int count=0;
      int found=0;
      for (      String token : tokens) {
        if (!token.isEmpty()) {
          count++;
          for (          String rule : card.getRules()) {
            if (rule.toLowerCase().contains(token)) {
              found++;
              break;
            }
          }
          if (filterOut) {
            for (            String subType : card.getSubtype()) {
              if (subType.equalsIgnoreCase(token)) {
                found++;
                break;
              }
            }
          }
        }
      }
      if (found < count)       return notFilter;
    }
  }
  return !notFilter;
}
