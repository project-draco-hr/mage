{
  int damageDone=0;
  if (damage > 0 && canDamage(game.getObject(sourceId))) {
    if (cardType.contains(CardType.PLANESWALKER)) {
      damageDone=damagePlaneswalker(damage,sourceId,game);
    }
 else {
      damageDone=damageCreature(damage,sourceId,game);
    }
    if (damageDone > 0) {
      Permanent source=game.getPermanent(sourceId);
      if (source != null && source.getAbilities().containsKey(LifelinkAbility.getInstance().getId())) {
        Player player=game.getPlayer(source.getControllerId());
        player.gainLife(damageDone,game);
      }
      if (source != null && source.getAbilities().containsKey(DeathtouchAbility.getInstance().getId())) {
        deathtouched=true;
      }
    }
  }
  return damageDone;
}
