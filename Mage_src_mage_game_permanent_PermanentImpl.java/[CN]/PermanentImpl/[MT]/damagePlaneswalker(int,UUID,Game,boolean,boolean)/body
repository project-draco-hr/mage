{
  GameEvent event=new DamagePlaneswalkerEvent(objectId,sourceId,controllerId,damage,preventable,combat);
  if (!game.replaceEvent(event)) {
    int actualDamage=event.getAmount();
    if (actualDamage > 0) {
      int countersToRemove=actualDamage;
      if (countersToRemove > getCounters().getCount(CounterType.LOYALTY)) {
        countersToRemove=getCounters().getCount(CounterType.LOYALTY);
      }
      getCounters().removeCounter(CounterType.LOYALTY,countersToRemove);
      game.fireEvent(new DamagedPlaneswalkerEvent(objectId,sourceId,controllerId,actualDamage,combat));
      return actualDamage;
    }
  }
  return 0;
}
