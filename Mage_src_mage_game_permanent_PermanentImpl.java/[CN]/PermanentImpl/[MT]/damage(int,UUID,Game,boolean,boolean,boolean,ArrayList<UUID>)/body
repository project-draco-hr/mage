{
  int damageDone=0;
  if (damageAmount > 0 && canDamage(game.getObject(sourceId),game)) {
    if (cardType.contains(CardType.PLANESWALKER)) {
      damageDone=damagePlaneswalker(damageAmount,sourceId,game,preventable,combat,markDamage,appliedEffects);
    }
 else {
      damageDone=damageCreature(damageAmount,sourceId,game,preventable,combat,markDamage,appliedEffects);
    }
    if (damageDone > 0) {
      UUID sourceControllerId=null;
      MageObject source=game.getPermanentOrLKIBattlefield(sourceId);
      if (source == null) {
        source=game.getObject(sourceId);
        if (source instanceof Spell) {
          sourceControllerId=((Spell)source).getControllerId();
        }
 else {
          source=null;
        }
      }
 else {
        sourceControllerId=((Permanent)source).getControllerId();
      }
      if (source != null && source.getAbilities().containsKey(LifelinkAbility.getInstance().getId())) {
        Player player=game.getPlayer(sourceControllerId);
        player.gainLife(damageAmount,game);
      }
      if (source != null && source.getAbilities().containsKey(DeathtouchAbility.getInstance().getId())) {
        deathtouched=true;
      }
      if (dealtDamageByThisTurn == null) {
        dealtDamageByThisTurn=new ArrayList<>();
      }
      dealtDamageByThisTurn.add(sourceId);
    }
  }
  return damageDone;
}
