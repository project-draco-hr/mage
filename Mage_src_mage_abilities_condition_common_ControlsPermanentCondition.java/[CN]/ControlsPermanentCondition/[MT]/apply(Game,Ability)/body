{
  boolean conditionApplies=false;
  FilterPermanent localFilter=filter.copy();
  if (onlyControlled) {
    localFilter.add(new ControllerIdPredicate(source.getControllerId()));
  }
switch (this.type) {
case FEWER_THAN:
    conditionApplies=game.getBattlefield().count(localFilter,source.getSourceId(),source.getControllerId(),game) < this.count;
  break;
case MORE_THAN:
conditionApplies=game.getBattlefield().count(localFilter,source.getSourceId(),source.getControllerId(),game) > this.count;
break;
case EQUAL_TO:
conditionApplies=game.getBattlefield().count(localFilter,source.getSourceId(),source.getControllerId(),game) == this.count;
break;
}
if (this.condition != null) {
conditionApplies=conditionApplies && this.condition.apply(game,source);
}
return conditionApplies;
}
