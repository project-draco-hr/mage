{
  Player player=game.getPlayer(source.getControllerId());
  ManaCosts cost=new ManaCostsImpl("{X}{R}");
  if (player != null) {
    if (player.chooseUse(Outcome.Damage,"Pay " + cost.getText() + "? If you do, Flameblast Dragon deals X damage to target creature or player",game)) {
      int costX=player.announceXMana(0,Integer.MAX_VALUE,"Announce the value for {X}",game,source);
      cost.add(new GenericManaCost(costX));
      if (cost.pay(source,game,source.getId(),source.getControllerId(),false)) {
        Permanent permanent=game.getPermanent(source.getFirstTarget());
        if (permanent != null) {
          permanent.damage(costX,source.getId(),game,true,false);
          return true;
        }
        Player targetPlayer=game.getPlayer(source.getFirstTarget());
        if (targetPlayer != null) {
          targetPlayer.damage(costX,source.getSourceId(),game,true,false);
          return true;
        }
        return false;
      }
    }
  }
  return false;
}
