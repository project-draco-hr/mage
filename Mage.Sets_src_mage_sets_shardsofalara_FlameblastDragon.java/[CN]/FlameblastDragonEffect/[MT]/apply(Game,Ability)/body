{
  Player player=game.getPlayer(source.getControllerId());
  ManaCosts cost=new ManaCostsImpl("{X}{R}");
  if (player != null) {
    if (player.chooseUse(Constants.Outcome.Damage,"Pay " + cost.getText() + "? If you do, Flameblast Dragon deals X damage to target creature or player",game)) {
      cost.clearPaid();
      if (cost.pay(game,source.getId(),source.getControllerId(),false)) {
        int costX=((VariableCost)cost.getVariableCosts().get(0)).getAmount();
        Permanent permanent=game.getPermanent(source.getFirstTarget());
        if (permanent != null) {
          permanent.damage(costX,source.getId(),game,true,false);
          return true;
        }
        Player targetPlayer=game.getPlayer(source.getFirstTarget());
        if (targetPlayer != null) {
          player.damage(costX,source.getId(),game,true,false);
          return true;
        }
        return false;
      }
    }
  }
  return false;
}
