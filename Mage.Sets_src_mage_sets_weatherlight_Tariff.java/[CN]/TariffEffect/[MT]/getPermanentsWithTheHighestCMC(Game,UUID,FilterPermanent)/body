{
  List<Permanent> permanents=game.getBattlefield().getAllActivePermanents(filter,playerId,game);
  int highestCMC=-1;
  for (  Permanent permanent : permanents) {
    if (highestCMC < permanent.getManaCost().convertedManaCost()) {
      highestCMC=permanent.getManaCost().convertedManaCost();
    }
  }
  List<Permanent> result=new ArrayList<>();
  for (  Permanent permanent : permanents) {
    if (permanent.getManaCost().convertedManaCost() == highestCMC) {
      result.add(permanent);
    }
  }
  return result;
}
