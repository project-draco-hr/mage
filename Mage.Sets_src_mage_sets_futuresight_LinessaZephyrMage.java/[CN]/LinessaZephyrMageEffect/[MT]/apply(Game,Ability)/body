{
  Player controller=game.getPlayer(source.getControllerId());
  if (controller != null) {
    Player targetPlayer=game.getPlayer(source.getFirstTarget());
    if (targetPlayer != null) {
      Target target=new TargetControlledCreaturePermanent();
      target.setNotTarget(true);
      if (target.choose(Outcome.ReturnToHand,targetPlayer.getId(),source.getSourceId(),game)) {
        Permanent permanent=game.getPermanent(target.getFirstTarget());
        if (permanent != null) {
          targetPlayer.moveCardToHandWithInfo(permanent,source.getSourceId(),game,Zone.BATTLEFIELD);
        }
      }
      FilterControlledPermanent filter=new FilterControlledPermanent("artifact you control");
      filter.add(new CardTypePredicate(CardType.ARTIFACT));
      target=new TargetControlledPermanent(filter);
      target.setNotTarget(true);
      if (target.choose(Outcome.ReturnToHand,targetPlayer.getId(),source.getSourceId(),game)) {
        Permanent permanent=game.getPermanent(target.getFirstTarget());
        if (permanent != null) {
          targetPlayer.moveCardToHandWithInfo(permanent,source.getSourceId(),game,Zone.BATTLEFIELD);
        }
      }
      filter=new FilterControlledPermanent("enchantment you control");
      filter.add(new CardTypePredicate(CardType.ENCHANTMENT));
      target=new TargetControlledPermanent(filter);
      target.setNotTarget(true);
      if (target.choose(Outcome.ReturnToHand,targetPlayer.getId(),source.getSourceId(),game)) {
        Permanent permanent=game.getPermanent(target.getFirstTarget());
        if (permanent != null) {
          targetPlayer.moveCardToHandWithInfo(permanent,source.getSourceId(),game,Zone.BATTLEFIELD);
        }
      }
      filter=new FilterControlledPermanent("land you control");
      filter.add(new CardTypePredicate(CardType.LAND));
      target=new TargetControlledPermanent(filter);
      target.setNotTarget(true);
      if (target.choose(Outcome.ReturnToHand,targetPlayer.getId(),source.getSourceId(),game)) {
        Permanent permanent=game.getPermanent(target.getFirstTarget());
        if (permanent != null) {
          targetPlayer.moveCardToHandWithInfo(permanent,source.getSourceId(),game,Zone.BATTLEFIELD);
        }
      }
      return true;
    }
  }
  return false;
}
