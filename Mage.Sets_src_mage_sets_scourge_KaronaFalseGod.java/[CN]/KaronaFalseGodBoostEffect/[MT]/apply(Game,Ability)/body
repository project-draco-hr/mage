{
  Player player=game.getPlayer(source.getControllerId());
  if (player != null) {
    if (typeChosen.isEmpty()) {
      Choice typeChoice=new ChoiceImpl(true);
      typeChoice.setMessage("Choose creature type");
      typeChoice.setChoices(CardRepository.instance.getCreatureTypes());
      while (!player.choose(Outcome.BoostCreature,typeChoice,game)) {
        if (!player.isInGame()) {
          return false;
        }
      }
      typeChosen=typeChoice.getChoice();
      game.informPlayers(player.getName() + " has chosen " + typeChosen);
    }
    for (    Permanent perm : game.getBattlefield().getActivePermanents(filter,source.getControllerId(),game)) {
      if (perm.hasSubtype(typeChosen)) {
        perm.addPower(3);
        perm.addToughness(3);
      }
    }
  }
  return true;
}
