{
  this.jPanel1.setVisible(true);
  for (  ICardGrid component : this.cardSelector.getCardGridComponents()) {
    component.clearCardEventListeners();
    component.addCardEventListener(new Listener<Event>(){
      @Override public void event(      Event event){
switch (event.getEventName()) {
case "double-click":
          moveSelectorCardToDeck(event);
        break;
case "alt-double-click":
      if (mode == DeckEditorMode.FREE_BUILDING) {
        moveSelectorCardToSideboard(event);
      }
 else {
        moveSelectorCardToDeck(event);
      }
    break;
case "remove-main":
  DeckEditorPanel.this.deckArea.getDeckList().removeSelection();
break;
case "remove-sideboard":
DeckEditorPanel.this.deckArea.getSideboardList().removeSelection();
break;
}
refreshDeck();
}
}
);
}
this.deckArea.clearDeckEventListeners();
this.deckArea.addDeckEventListener(new Listener<Event>(){
@Override public void event(Event event){
if (mode.equals(DeckEditorMode.FREE_BUILDING)) {
switch (event.getEventName()) {
case "double-click":
{
SimpleCardView cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getCards()) {
if (card.getId().equals(cardView.getId())) {
deck.getCards().remove(card);
break;
}
}
hidePopup();
refreshDeck();
break;
}
case "alt-double-click":
{
SimpleCardView cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getCards()) {
if (card.getId().equals(cardView.getId())) {
deck.getCards().remove(card);
deck.getSideboard().add(card);
break;
}
}
hidePopup();
refreshDeck();
break;
}
case "set-number":
{
setCardNumberToCardsList(event,deck.getCards());
break;
}
case "remove-specific-card":
{
SimpleCardView cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getCards()) {
if (card.getId().equals(cardView.getId())) {
deck.getCards().remove(card);
storeTemporaryCard(card);
break;
}
}
break;
}
case "add-specific-card":
{
SimpleCardView cardView=(CardView)event.getSource();
deck.getCards().add(retrieveTemporaryCard(cardView));
break;
}
}
}
 else {
switch (event.getEventName()) {
case "double-click":
case "alt-double-click":
{
SimpleCardView cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getCards()) {
if (card.getId().equals(cardView.getId())) {
deck.getCards().remove(card);
deck.getSideboard().add(card);
cardSelector.loadSideboard(new ArrayList<>(deck.getSideboard()),getBigCard());
break;
}
}
hidePopup();
refreshDeck();
break;
}
case "remove-specific-card":
{
SimpleCardView cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getCards()) {
if (card.getId().equals(cardView.getId())) {
deck.getCards().remove(card);
storeTemporaryCard(card);
break;
}
}
break;
}
case "add-specific-card":
{
SimpleCardView cardView=(CardView)event.getSource();
deck.getCards().add(retrieveTemporaryCard(cardView));
break;
}
}
}
}
}
);
this.deckArea.clearSideboardEventListeners();
this.deckArea.addSideboardEventListener(new Listener<Event>(){
@Override public void event(Event event){
if (mode.equals(DeckEditorMode.FREE_BUILDING)) {
switch (event.getEventName()) {
case "double-click":
SimpleCardView cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getSideboard()) {
if (card.getId().equals(cardView.getId())) {
deck.getSideboard().remove(card);
break;
}
}
hidePopup();
refreshDeck();
break;
case "alt-double-click":
cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getSideboard()) {
if (card.getId().equals(cardView.getId())) {
deck.getSideboard().remove(card);
deck.getCards().add(card);
break;
}
}
hidePopup();
refreshDeck();
break;
case "set-number":
{
setCardNumberToCardsList(event,deck.getSideboard());
break;
}
case "remove-specific-card":
{
cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getSideboard()) {
if (card.getId().equals(cardView.getId())) {
deck.getSideboard().remove(card);
storeTemporaryCard(card);
break;
}
}
break;
}
case "add-specific-card":
{
cardView=(CardView)event.getSource();
deck.getSideboard().add(retrieveTemporaryCard(cardView));
break;
}
}
}
 else {
switch (event.getEventName()) {
case "remove-specific-card":
{
SimpleCardView cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getSideboard()) {
if (card.getId().equals(cardView.getId())) {
deck.getSideboard().remove(card);
storeTemporaryCard(card);
break;
}
}
break;
}
case "add-specific-card":
{
SimpleCardView cardView=(CardView)event.getSource();
deck.getSideboard().add(retrieveTemporaryCard(cardView));
break;
}
case "double-click":
case "alt-double-click":
SimpleCardView cardView=(SimpleCardView)event.getSource();
for (Card card : deck.getSideboard()) {
if (card.getId().equals(cardView.getId())) {
deck.getSideboard().remove(card);
deck.getCards().add(card);
break;
}
}
hidePopup();
refreshDeck();
break;
}
}
}
}
);
refreshDeck();
this.setVisible(true);
this.repaint();
}
