{
  SimpleCardView cardView=(SimpleCardView)event.getSource();
  CardInfo cardInfo=CardRepository.instance.findCard(cardView.getExpansionSetCode(),cardView.getCardNumber());
  Card card=null;
  if (mode == DeckEditorMode.SIDEBOARDING || mode == DeckEditorMode.LIMITED_BUILDING) {
    Iterator sideboard=deck.getSideboard().iterator();
    while (sideboard.hasNext()) {
      card=(Card)sideboard.next();
      if (card.getId().equals(cardView.getId())) {
        break;
      }
    }
  }
 else {
    card=cardInfo != null ? cardInfo.getMockCard() : null;
  }
  if (card != null) {
    deck.getCards().add(card);
    if (mode == DeckEditorMode.SIDEBOARDING || mode == DeckEditorMode.LIMITED_BUILDING) {
      deck.getSideboard().remove(card);
      cardSelector.removeCard(card.getId());
      cardSelector.setCardCount(deck.getSideboard().size());
      cardSelector.refresh();
    }
    if (cardInfoPane instanceof CardInfoPane) {
      ((CardInfoPane)cardInfoPane).setCard(new CardView(card),null);
    }
    hidePopup();
  }
}
