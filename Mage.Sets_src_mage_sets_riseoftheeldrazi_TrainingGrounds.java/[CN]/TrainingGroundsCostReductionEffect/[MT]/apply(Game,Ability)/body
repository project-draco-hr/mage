{
  boolean applied=false;
  List<Permanent> permanents=game.getBattlefield().getActivePermanents(filter,source.getControllerId(),source.getSourceId(),game);
  if (permanents != null && !permanents.isEmpty()) {
    for (    Permanent permanent : permanents) {
      for (      Ability ability : permanent.getAbilities()) {
        if (!(ability instanceof SpellAbility) && ability.getManaCosts() != null) {
          int costCount=ability.getManaCosts().size();
          for (          Cost cost : ability.getManaCosts()) {
            if (cost instanceof GenericManaCost) {
              GenericManaCost costCasted=(GenericManaCost)cost;
              int amount=costCasted.convertedManaCost();
              int adjustedAmount=0;
              if (costCount == 1 && (amount - 2) <= 0) {
                adjustedAmount=1;
              }
 else {
                adjustedAmount=Math.max(0,amount - 2);
              }
              costCasted.setMana(adjustedAmount);
              applied=true;
            }
          }
        }
      }
    }
  }
  return applied;
}
