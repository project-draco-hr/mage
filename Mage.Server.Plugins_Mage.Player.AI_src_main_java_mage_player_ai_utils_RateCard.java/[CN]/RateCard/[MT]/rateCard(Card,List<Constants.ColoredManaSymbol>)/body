{
  if (allowedColors == null && rated.containsKey(card.getName())) {
    return rated.get(card.getName());
  }
  int type=0;
  if (card.getCardType().contains(Constants.CardType.PLANESWALKER)) {
    type=15;
  }
  if (card.getCardType().contains(Constants.CardType.CREATURE)) {
    type=10;
  }
 else   if (card.getSubtype().contains("Equipment")) {
    type=8;
  }
 else   if (card.getSubtype().contains("Aura")) {
    type=5;
  }
 else   if (card.getCardType().contains(Constants.CardType.INSTANT)) {
    type=7;
  }
 else {
    type=6;
  }
  int score=10 * getCardRating(card) + 2 * type + getManaCostScore(card,allowedColors) + 40 * isRemoval(card);
  if (allowedColors == null)   rated.put(card.getName(),score);
  return score;
}
