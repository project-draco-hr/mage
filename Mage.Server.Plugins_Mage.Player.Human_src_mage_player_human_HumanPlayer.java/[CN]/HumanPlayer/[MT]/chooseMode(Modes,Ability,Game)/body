{
  updateGameStatePriority("chooseMode",game);
  if (modes.size() > 1) {
    MageObject obj=game.getObject(source.getSourceId());
    Map<UUID,String> modeMap=new LinkedHashMap<UUID,String>();
    for (    Mode mode : modes.values()) {
      String modeText=mode.getEffects().getText(mode);
      if (obj != null) {
        modeText=modeText.replace("{source}",obj.getName());
      }
      modeMap.put(mode.getId(),modeText);
    }
    game.fireGetModeEvent(playerId,"Choose Mode",modeMap);
    waitForResponse();
    if (response.getUUID() != null) {
      for (      Mode mode : modes.values()) {
        if (mode.getId().equals(response.getUUID())) {
          return mode;
        }
      }
    }
    return null;
  }
  return modes.getMode();
}
