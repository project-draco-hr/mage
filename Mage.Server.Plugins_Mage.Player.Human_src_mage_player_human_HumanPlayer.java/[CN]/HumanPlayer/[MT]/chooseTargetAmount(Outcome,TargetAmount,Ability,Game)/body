{
  updateGameStatePriority("chooseTargetAmount",game);
  while (!abort) {
    game.fireSelectTargetEvent(playerId,target.getMessage() + "\n Amount remaining:" + target.getAmountRemaining(),target.possibleTargets(source == null ? null : source.getSourceId(),playerId,game),target.isRequired(source),getOptions(target,null));
    waitForResponse(game);
    if (response.getUUID() != null) {
      if (target.canTarget(response.getUUID(),source,game)) {
        UUID targetId=response.getUUID();
        int amountSelected=getAmount(1,target.getAmountRemaining(),"Select amount",game);
        target.addTarget(targetId,amountSelected,source,game);
        return true;
      }
    }
 else     if (!target.isRequired(source)) {
      return false;
    }
  }
  return false;
}
