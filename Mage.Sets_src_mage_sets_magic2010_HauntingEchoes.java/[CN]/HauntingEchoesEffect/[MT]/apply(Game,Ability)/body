{
  Player player=game.getPlayer(source.getFirstTarget());
  Set<UUID> remove=new HashSet<UUID>();
  for (Iterator<UUID> i=player.getGraveyard().iterator(); i.hasNext(); ) {
    Card card=game.getCard(i.next());
    if (!filter.match(card)) {
      i.remove();
      game.getExile().add(card);
      for (      UUID cardId : player.getLibrary().getCardList()) {
        if (game.getCard(cardId).getName().equals(card.getName())) {
          remove.add(cardId);
        }
      }
    }
  }
  for (  UUID cardId : remove) {
    game.getExile().add(player.getLibrary().remove(cardId,game));
  }
  game.getPlayer(source.getControllerId()).lookAtCards(new CardsImpl(Zone.PICK,player.getLibrary().getCards(game)),game);
  player.shuffleLibrary(game);
  return true;
}
