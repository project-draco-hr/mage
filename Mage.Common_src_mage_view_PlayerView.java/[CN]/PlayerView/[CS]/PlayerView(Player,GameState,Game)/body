{
  this.playerId=player.getId();
  this.name=player.getName();
  this.life=player.getLife();
  this.poison=player.getCounters().getCount(CounterType.POISON);
  this.libraryCount=player.getLibrary().size();
  this.handCount=player.getHand().size();
  this.manaPool=new ManaPoolView(player.getManaPool());
  this.isActive=(player.getId().equals(state.getActivePlayerId()));
  this.hasLeft=player.hasLeft();
  for (  Card card : player.getGraveyard().getCards(game)) {
    graveyard.put(card.getId(),new SimpleCardView(card.getId(),card.getExpansionSetCode(),card.getCardNumber(),card.isFaceDown()));
  }
  for (  Permanent permanent : state.getBattlefield().getAllPermanents()) {
    if (showInBattlefield(permanent,state)) {
      PermanentView view=new PermanentView(permanent,game.getCard(permanent.getId()));
      battlefield.put(view.getId(),view);
    }
  }
}
