{
  this.roomId=roomId;
  session=MageFrame.getSession();
  if (session != null) {
    btnQuickStart.setVisible(session.isTestMode());
  }
  if (newTableDialog == null) {
    newTableDialog=new NewTableDialog();
    MageFrame.getDesktop().add(newTableDialog,JLayeredPane.MODAL_LAYER);
  }
  if (newTournamentDialog == null) {
    newTournamentDialog=new NewTournamentDialog();
    MageFrame.getDesktop().add(newTournamentDialog,JLayeredPane.MODAL_LAYER);
  }
  if (joinTableDialog == null) {
    joinTableDialog=new JoinTableDialog();
    MageFrame.getDesktop().add(joinTableDialog,JLayeredPane.MODAL_LAYER);
  }
  UUID chatRoomId=session.getRoomChatId(roomId);
  if (chatRoomId != null) {
    this.chatPanel.connect(chatRoomId);
    startTasks();
    this.setVisible(true);
    this.repaint();
  }
 else {
    hideTables();
  }
  List<String> messages=session.getServerMessages();
synchronized (this) {
    this.messages=messages;
    this.currentMessage=0;
  }
  if (messages == null || messages.isEmpty()) {
    this.jPanel2.setVisible(false);
  }
 else {
    this.jPanel2.setVisible(true);
    this.jLabel2.setText(messages.get(0));
    this.jButton1.setVisible(messages.size() > 1);
  }
  MageFrame.getUI().addButton(MageComponents.NEW_GAME_BUTTON,btnNewTable);
}
