{
  File f=new File(filename);
  Scanner scanner=new Scanner(f);
  try {
    while (scanner.hasNextLine()) {
      String line=scanner.nextLine().trim();
      if (line == null || line.isEmpty() || line.startsWith("#"))       continue;
      Matcher m=pattern.matcher(line);
      if (m.matches()) {
        String zone=m.group(1);
        String nickname=m.group(2);
        if (nickname.equals("ComputerA") || nickname.equals("ComputerB")) {
          List<Card> cards;
          Constants.Zone gameZone;
          if ("hand".equalsIgnoreCase(zone)) {
            gameZone=Constants.Zone.HAND;
            cards=nickname.equals("ComputerA") ? handCardsA : handCardsB;
          }
 else           if ("battlefield".equalsIgnoreCase(zone)) {
            gameZone=Constants.Zone.BATTLEFIELD;
            cards=nickname.equals("ComputerA") ? battlefieldCardsA : battlefieldCardsB;
          }
 else           if ("graveyard".equalsIgnoreCase(zone)) {
            gameZone=Constants.Zone.GRAVEYARD;
            cards=nickname.equals("ComputerA") ? graveyardCardsA : graveyardCardsB;
          }
 else           if ("library".equalsIgnoreCase(zone)) {
            gameZone=Constants.Zone.LIBRARY;
            cards=nickname.equals("ComputerA") ? libraryCardsA : libraryCardsB;
          }
 else           if ("player".equalsIgnoreCase(zone)) {
            String command=m.group(3);
            if ("life".equals(command)) {
              if (nickname.equals("ComputerA")) {
                commandsA.put(Constants.Zone.OUTSIDE,"life:" + m.group(4));
              }
 else {
                commandsB.put(Constants.Zone.OUTSIDE,"life:" + m.group(4));
              }
            }
            continue;
          }
 else {
            continue;
          }
          String cardName=m.group(3);
          Integer amount=Integer.parseInt(m.group(4));
          boolean tapped=m.group(5) != null && m.group(5).equals(":{tapped}");
          if (cardName.equals("clear")) {
            if (nickname.equals("ComputerA")) {
              commandsA.put(gameZone,"clear");
            }
 else {
              commandsB.put(gameZone,"clear");
            }
          }
 else {
            for (int i=0; i < amount; i++) {
              Card card=Sets.findCard(cardName,true);
              if (card != null) {
                if (gameZone.equals(Constants.Zone.BATTLEFIELD)) {
                  PermanentCard p=new PermanentCard(card,null);
                  p.setTapped(tapped);
                  cards.add(p);
                }
 else {
                  cards.add(card);
                }
              }
 else {
                logger.fatal("Couldn't find a card: " + cardName);
                logger.fatal("line: " + line);
              }
            }
          }
        }
 else {
          logger.warn("Unknown player: " + nickname);
        }
      }
 else {
        logger.warn("Init string wasn't parsed: " + line);
      }
    }
  }
  finally {
    scanner.close();
  }
}
