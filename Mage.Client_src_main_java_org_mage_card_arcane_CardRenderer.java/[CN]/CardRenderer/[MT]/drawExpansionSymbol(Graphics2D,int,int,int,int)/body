{
  Image setSymbol=ManaSymbols.getSetSymbolImage(cardView.getExpansionSetCode(),cardView.getRarity().getCode());
  int setSymbolWidth;
  if (setSymbol == null) {
    String code=cardView.getExpansionSetCode().toUpperCase();
    FontMetrics metrics=g.getFontMetrics();
    setSymbolWidth=metrics.stringWidth(code);
    if (cardView.getRarity() == Rarity.COMMON) {
      g.setColor(Color.white);
    }
 else {
      g.setColor(Color.black);
    }
    g.fillRoundRect(x + w - setSymbolWidth - 1,y + 2,setSymbolWidth + 2,h - 5,5,5);
    g.setColor(getRarityColor());
    g.drawString(code,x + w - setSymbolWidth,y + h - 3);
  }
 else {
    int height=setSymbol.getHeight(null);
    int scale=1;
    if (height != -1) {
      while (height > h + 2) {
        scale*=2;
        height/=2;
      }
    }
    setSymbolWidth=setSymbol.getWidth(null) / scale;
    g.drawImage(setSymbol,x + w - setSymbolWidth,y + (h - height) / 2,setSymbolWidth,height,null);
  }
  return setSymbolWidth;
}
