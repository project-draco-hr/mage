{
  List<Permanent> threats=playerId == null ? game.getBattlefield().getAllActivePermanents(filter) : game.getBattlefield().getActivePermanents(filter,playerId,sourceId,game);
  Iterator<Permanent> it=threats.iterator();
  while (it.hasNext()) {
    Permanent test=it.next();
    if (targets.contains(test.getId()))     it.remove();
  }
  Collections.sort(threats,new PermanentComparator(game));
  Collections.reverse(threats);
  return threats;
}
