{
  Deck deck=new Deck();
  List<Card> sortedCards=new ArrayList<>(cardPool);
  Collections.sort(sortedCards,new Comparator<Card>(){
    @Override public int compare(    Card o1,    Card o2){
      Integer score1=RateCard.rateCard(o1,colors);
      Integer score2=RateCard.rateCard(o2,colors);
      return score2.compareTo(score1);
    }
  }
);
  int cardNum=0;
  while (deck.getCards().size() < 23 && sortedCards.size() > cardNum) {
    Card card=sortedCards.get(cardNum);
    if (!card.getSupertype().contains("Basic")) {
      deck.getCards().add(card);
      deck.getSideboard().remove(card);
    }
    cardNum++;
  }
  Mana mana=new Mana();
  for (  Card card : deck.getCards()) {
    mana.add(card.getManaCost().getMana());
  }
  double total=mana.getBlack() + mana.getBlue() + mana.getGreen()+ mana.getRed()+ mana.getWhite();
  int mostLand=0;
  String mostLandName="Forest";
  if (mana.getGreen() > 0) {
    int number=(int)Math.round(mana.getGreen() / total * 17);
    addBasicLands(deck,"Forest",number);
    mostLand=number;
  }
  if (mana.getBlack() > 0) {
    int number=(int)Math.round(mana.getBlack() / total * 17);
    addBasicLands(deck,"Swamp",number);
    if (number > mostLand) {
      mostLand=number;
      mostLandName="Swamp";
    }
  }
  if (mana.getBlue() > 0) {
    int number=(int)Math.round(mana.getBlue() / total * 17);
    addBasicLands(deck,"Island",number);
    if (number > mostLand) {
      mostLand=number;
      mostLandName="Island";
    }
  }
  if (mana.getWhite() > 0) {
    int number=(int)Math.round(mana.getWhite() / total * 17);
    addBasicLands(deck,"Plains",number);
    if (number > mostLand) {
      mostLand=number;
      mostLandName="Plains";
    }
  }
  if (mana.getRed() > 0) {
    int number=(int)Math.round(mana.getRed() / total * 17);
    addBasicLands(deck,"Mountain",number);
    if (number > mostLand) {
      mostLandName="Plains";
    }
  }
  addBasicLands(deck,mostLandName,40 - deck.getCards().size());
  return deck;
}
