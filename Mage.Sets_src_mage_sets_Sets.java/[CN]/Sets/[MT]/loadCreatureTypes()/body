{
  Cache cache=CacheDataHelper.getCachedObject(CREATURE_TYPES_CACHE_OBJECT_NAME);
  if (cache == null || cache.getVersion() != CACHE_VERSION) {
    for (    Card card : cards) {
      if (card.getCardType().contains(CardType.CREATURE)) {
        for (        String type : card.getSubtype()) {
          creatureTypes.add(type);
          if (type.equals("")) {
            throw new IllegalStateException("Card with empty subtype: " + card.getName());
          }
        }
      }
    }
    cache=new Cache(CREATURE_TYPES_CACHE_OBJECT_NAME,CACHE_VERSION);
    cache.getCacheObjects().put(CREATURE_TYPES_KEY,creatureTypes);
    CacheDataHelper.cacheObject(cache,CREATURE_TYPES_CACHE_OBJECT_NAME);
  }
 else {
    Set<String> cachedCreatureTypes=(Set<String>)cache.getCacheObjects().get(CREATURE_TYPES_KEY);
    creatureTypes.addAll(cachedCreatureTypes);
  }
}
