{
  List<Card> cardPool=new ArrayList<Card>();
  int count=0;
  int tries=0;
  while (count < cardsCount) {
    Card card=getRandomCard();
    if (!card.getCardType().contains(CardType.LAND)) {
      if (cardFitsChosenColors(card,allowedColors)) {
        cardPool.add(card);
        count++;
      }
    }
    tries++;
    if (tries > 4096) {
      throw new IllegalStateException("Not enough cards for chosen colors to generate deck: " + allowedColors);
    }
  }
  return cardPool;
}
